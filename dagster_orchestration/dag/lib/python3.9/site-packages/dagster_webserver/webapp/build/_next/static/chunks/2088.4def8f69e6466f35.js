"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2088],{21473:function(e,n,t){t.d(n,{G:function(){return I}});var r=t(73235),i=t(52322),o=t(49853),s=t(49308),l=t(14934),a=t(37483),d=t(43212),c=t(89891),p=t(80122),u=t(56619),h=t(2784),x=t(7267),m=t(36381),j=t(76016),g=t(20958),f=t(78491),y=t(16336),v=t(69737),b=t(33298),S=t(30916),w=t(43984),C=t(33182),N=t(52338),A=t(15332),E=t(88610),P=t(59923),k=t(85062),O=t(92199),_=t(22563),R=t(10539);function $(){let e=(0,r._)(["\n  query PipelineRunsRootQuery($limit: Int, $cursor: String, $filter: RunsFilter!) {\n    pipelineRunsOrError(limit: $limit, cursor: $cursor, filter: $filter) {\n      ... on Runs {\n        results {\n          id\n          ...RunTableRunFragment\n        }\n      }\n      ... on InvalidPipelineRunsFilterError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return $=function(){return e},e}let F=["status","tag","id","created_date_before","created_date_after"],I=e=>{(0,v.Px)();let{pipelinePath:n}=(0,x.UO)(),{repoAddress:t=null}=e,r=(0,m.p3)(n),{pipelineName:u,snapshotId:g}=r,f=(0,O.Ux)(t),S=(0,O.E8)(f,u);(0,j.b)(r,S);let[E,R]=(0,N.oD)(F),$=(0,h.useMemo)(()=>[S?{token:"job",value:u}:{token:"pipeline",value:u},g?{token:"snapshotId",value:g}:null].filter(Boolean),[S,u,g]),I=[...E,...$];if(t){let e={token:"tag",value:"".concat(w.H.RepositoryLabelTag,"=").concat((0,_.Wg)(t))};I.push(e)}let{queryResult:M,paginationProps:U}=(0,A.l)({query:z,pageSize:25,variables:{filter:{...(0,N.VH)(I),pipelineName:u,snapshotId:g}},nextCursorForResult:e=>{var n;if("Runs"===e.pipelineRunsOrError.__typename)return null===(n=e.pipelineRunsOrError.results[24])||void 0===n?void 0:n.id},getResultArray:e=>e&&"Runs"===e.pipelineRunsOrError.__typename?e.pipelineRunsOrError.results:[]}),L=(0,h.useCallback)(e=>{let n=(0,o.HY)(e);E.some(e=>(0,o.HY)(e)===n)||R([...E,e])},[E,R]),D=(0,y.C4)(M,y.dT),{button:V,activeFiltersJsx:J}=(0,N.Vv)({enabledFilters:F,tokens:E,onChange:R,loading:M.loading});return(0,i.jsx)(C.Lw.Provider,{value:{refetch:M.refetch},children:(0,i.jsx)(s.T,{children:(0,i.jsx)(P.g,{queryResult:M,allowStaleData:!0,children:e=>{let{pipelineRunsOrError:r}=e;if("Runs"!==r.__typename)return(0,i.jsx)(l.x,{padding:{vertical:64},children:(0,i.jsx)(a.t,{icon:"error",title:"Query Error",description:r.message})});let o=r.results.slice(0,25),{hasNextCursor:s,hasPrevCursor:h}=U;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(k.Y,{$top:0,children:(0,i.jsx)(b.A,{runs:o,onAddTag:L,actionBarComponents:(0,i.jsxs)(l.x,{flex:{direction:"row",justifyContent:"space-between",grow:1,alignItems:"center",gap:4},margin:{right:8},children:[V,(0,i.jsx)(y.xi,{refreshState:D})]}),belowActionBarComponents:(0,i.jsxs)(i.Fragment,{children:[$.map(e=>{let{token:n,value:t}=e;return(0,i.jsx)(d.V,{children:"".concat(n,":").concat(t)},n)}),J.length?(0,i.jsxs)(i.Fragment,{children:[J,(0,i.jsx)(c.Z,{onClick:()=>{R([])},children:"Clear all"})]}):null]}),emptyState:()=>(0,i.jsx)(T,{repoAddress:t,anyFilter:E.length>0,jobName:u,jobPath:n})})}),s||h?(0,i.jsx)("div",{style:{marginTop:"20px"},children:(0,i.jsx)(p.pI,{...U})}):null]})}})})})},T=e=>{let{repoAddress:n,anyFilter:t,jobName:r,jobPath:o}=e,s=(0,O.Ux)(n),d=(0,O.Hb)(s,r);return(0,i.jsx)(l.x,{padding:{vertical:64},children:(0,i.jsx)(a.t,{icon:"run",title:"No runs found",description:n?d?(0,i.jsxs)(l.x,{flex:{direction:"column",gap:12},children:[(0,i.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not materialized any assets with this job yet."}),(0,i.jsx)("div",{children:(0,i.jsx)(E.A,{icon:(0,i.jsx)(u.JO,{name:"materialization"}),to:(0,R.$U)(n,"/jobs/".concat(o)),children:"Materialize an asset"})})]}):(0,i.jsxs)(l.x,{flex:{direction:"column",gap:12},children:[(0,i.jsx)("div",{children:t?"There are no matching runs for these filters.":"You have not launched any runs for this job yet."}),(0,i.jsx)("div",{children:(0,i.jsx)(E.A,{icon:(0,i.jsx)(u.JO,{name:"add_circle"}),to:(0,R.$U)(n,"/jobs/".concat(o,"/playground")),children:"Launch a run"})})]}):(0,i.jsx)("div",{children:"You have not launched any runs for this job."})})})},z=(0,g.Ps)($(),S.Z,f.B)},91319:function(e,n,t){t.d(n,{y:function(){return p}});var r=t(52322),i=t(14934),o=t(35002),s=t(39013),l=t(56619),a=t(83373),d=t(47933),c=t(35505);let p=e=>{let{active:n=!1,item:t}=e,{type:s,icon:l,label:a,rightElement:d,tooltip:c="",disabled:p=!1}=t,u=(0,r.jsxs)(i.x,{padding:{vertical:4,left:12,right:8},flex:{direction:"row",gap:8,alignItems:"center",justifyContent:"space-between"},children:[(0,r.jsxs)(i.x,{flex:{direction:"row",gap:8,alignItems:"center"},className:"iconAndLabel",children:[l,a]}),(0,r.jsx)("div",{children:d})]});return"link"!==s||p?(0,r.jsx)(o.u,{canShow:!!c,content:c,placement:"right",display:"block",children:(0,r.jsx)(x,{$active:n,disabled:p,onClick:t.onClick,children:u})}):(0,r.jsx)(o.u,{canShow:!!c,content:c,placement:"right",display:"block",children:(0,r.jsx)(h,{to:t.path,$active:n,children:u})})},u=(0,c.iv)(["background-color:",";border-radius:8px;color:",";display:block;font-size:14px;line-height:20px;text-decoration:none;transition:100ms background-color linear;user-select:none;width:100%;:focus{outline:none;background-color:",";}:hover,:active{background-color:",";color:",";text-decoration:none;}.iconAndLabel{","{background-color:",";}}"],e=>{let{$active:n}=e;return n?s.Dd():"transparent"},e=>{let{$active:n}=e;return n?s.Ne():s.Ep()},e=>{let{$active:n}=e;return n?s.Dd():s.gJ()},e=>{let{$active:n}=e;return n?s.Dd():s._c()},e=>{let{$active:n}=e;return n?s.Ne():s.Ep()},l.a1,e=>{let{$active:n}=e;return n?s.Ne():s.Ep()}),h=(0,c.ZP)(d.rU).withConfig({componentId:"sc-a48d7aeb-0"})(["",""],u),x=(0,c.ZP)(a.k).withConfig({componentId:"sc-a48d7aeb-1"})(["",""],u)},14277:function(e,n,t){t.d(n,{c5:function(){return h}});var r=t(52322),i=t(60603),o=t(55010),s=t(38491),l=t(56619),a=t(92506),d=t(1747),c=t(20156),p=t(2784),u=t(45984);let h=e=>{var n;let{locationNode:t}=e,[a,d]=(0,p.useState)(!1),[c,u]=(0,p.useState)(!1),h=null,j=null;return(null===(n=t.locationOrLoadError)||void 0===n?void 0:n.__typename)==="RepositoryLocation"&&null!==t.locationOrLoadError.dagsterLibraryVersions&&(h=(0,r.jsx)(i.sN,{icon:"info",text:"View Dagster libraries",onClick:()=>u(!0)}),j=(0,r.jsx)(m,{libraries:t.locationOrLoadError.dagsterLibraryVersions,isOpen:c,setIsOpen:u})),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.J,{position:"bottom-left",content:(0,r.jsxs)(i.v2,{children:[(0,r.jsx)(i.sN,{icon:"info",text:"View configuration",onClick:()=>d(!0)}),h]}),children:(0,r.jsx)(s.zx,{icon:(0,r.jsx)(l.JO,{name:"expand_more"})})}),(0,r.jsx)(x,{metadata:t.displayMetadata,isOpen:a,setIsOpen:d}),j]})},x=e=>{let{isOpen:n,setIsOpen:t,metadata:i}=e;return(0,r.jsxs)(a.Vq,{title:"Code location configuration",icon:"info",isOpen:n,onClose:()=>t(!1),style:{width:"600px"},children:[(0,r.jsx)(j,{displayMetadata:i}),(0,r.jsx)(a.cN,{topBorder:!0,children:(0,r.jsx)(s.zx,{onClick:()=>t(!1),intent:"primary",children:"Done"})})]})},m=e=>{let{isOpen:n,setIsOpen:t,libraries:i}=e;return(0,r.jsxs)(a.Vq,{title:"Dagster library versions",icon:"info",isOpen:n,onClose:()=>t(!1),style:{width:"600px"},children:[(0,r.jsxs)(d.i,{children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{children:"Library"}),(0,r.jsx)("th",{children:"Version"})]})}),(0,r.jsx)("tbody",{children:i.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.name}),(0,r.jsx)("td",{children:e.version})]},e.name))})]}),(0,r.jsx)(a.cN,{topBorder:!0,children:(0,r.jsx)(s.zx,{onClick:()=>t(!1),intent:"primary",children:"Done"})})]})},j=e=>{let{displayMetadata:n}=e,t=(0,p.useMemo)(()=>{let e=n.reduce((e,n)=>(e[n.key]=n.value,e),{});return u.Pz(e)},[n]);return(0,r.jsx)(c.u,{value:t,options:{readOnly:!0,lineNumbers:!0,mode:"yaml"},theme:["config-editor"]})}},12576:function(e,n,t){t.d(n,{F8:function(){return w},OM:function(){return b},_y:function(){return C},hN:function(){return N}});var r=t(52322),i=t(35002),o=t(83373),s=t(53664),l=t(14934),a=t(39013),d=t(43212),c=t(89891),p=t(38491),u=t(56619),h=t(74188),x=t(2784),m=t(35505),j=t(81306),g=t(50309),f=t(85227),y=t(22203),v=t(68954);let b=e=>{let{metadata:n}=e,t=(0,f.m)(),l=n.find(e=>{let{key:n}=e;return"image"===n}),a=(null==l?void 0:l.value)||"",d=(0,x.useCallback)(async()=>{t(a),await (0,g.B7)({intent:"success",icon:"done",message:"Image string copied!"})},[t,a]);return l?(0,r.jsxs)(S,{flex:{direction:"row",gap:4},children:[(0,r.jsx)("span",{style:{fontWeight:500},children:"image:"}),(0,r.jsx)(i.u,{content:"Click to copy",placement:"top",display:"block",children:(0,r.jsx)(o.k,{onClick:d,style:A,children:(0,r.jsx)(s.g,{text:l.value})})})]}):null},S=(0,m.ZP)(l.x).withConfig({componentId:"sc-b526e331-0"})(["width:100%;color:",";font-size:12px;.bp4-popover2-target{overflow:hidden;}"],a.$()),w=e=>{let{metadata:n}=e,t=n.find(e=>{let{key:n}=e;return"module_name"===n||"package_name"===n||"python_file"===n});return t?(0,r.jsxs)(l.x,{flex:{direction:"row",gap:4},style:{width:"100%",color:a.$(),fontSize:12},children:[(0,r.jsxs)("span",{style:{fontWeight:500},children:[t.key,":"]}),(0,r.jsx)("div",{style:A,children:(0,r.jsx)(s.g,{text:t.value})})]}):null},C=e=>{var n;let{locationStatus:t,locationOrError:i}=e,[o,s]=(0,x.useState)(!1),a=(0,x.useMemo)(()=>(0,v.je)(t.name),[t.name]),{reloading:p,tryReload:u}=(0,v.Dc)({scope:"location",reloadFn:a});return"LOADING"===t.loadStatus?(0,r.jsx)(d.V,{minimal:!0,intent:"primary",children:"Updating…"}):(null==i?void 0:i.versionKey)!==t.versionKey?(0,r.jsx)(d.V,{minimal:!0,intent:"primary",children:"Loading…"}):(null==i?void 0:null===(n=i.locationOrLoadError)||void 0===n?void 0:n.__typename)==="PythonError"?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(l.x,{flex:{alignItems:"center",gap:12},children:[(0,r.jsx)(d.V,{minimal:!0,intent:"danger",children:"Failed"}),(0,r.jsx)(c.Z,{onClick:()=>s(!0),children:(0,r.jsx)("span",{style:{fontSize:"12px"},children:"View error"})})]}),(0,r.jsx)(j.p,{location:t.name,isOpen:o,error:i.locationOrLoadError,reloading:p,onDismiss:()=>s(!1),onTryReload:()=>u()})]}):(0,r.jsx)(d.V,{minimal:!0,intent:"success",children:"Loaded"})},N=e=>{let{location:n}=e;return(0,r.jsx)(y.s,{location:n,ChildComponent:e=>{let{reloading:n,tryReload:t,hasReloadPermission:o}=e;return(0,r.jsx)(l.x,{flex:{direction:"row",alignItems:"center",gap:4},children:(0,r.jsx)(i.u,{content:o?"":y.H,canShow:!o,useDisabledButtonTooltipFix:!0,children:(0,r.jsx)(p.zx,{icon:(0,r.jsx)(u.JO,{name:"code_location_reload"}),disabled:!o,loading:n,onClick:()=>t(),children:"Reload"})})})}})},A={width:"100%",display:"block",fontFamily:h.b.monospace,fontSize:"12px",color:a.$()}},22088:function(e,n,t){t.r(n),t.d(n,{WorkspaceRoot:function(){return iS},default:function(){return iw}});var r=t(52322),i=t(14934),o=t(37483),s=t(45774),l=t(66962),a=t(2784),d=t(7267),c=t(38491),p=t(56619),u=t(47933),h=t(81306),x=t(22563),m=t(68954);let j=e=>{var n;let{repoAddress:t,locationEntry:s}=e,l=(0,x.Uz)(t),d=t.location,[j,g]=(0,a.useState)(!1),f=(0,a.useMemo)(()=>(0,m.je)(d),[d]),{reloading:y,tryReload:v}=(0,m.Dc)({scope:"location",reloadFn:f});return(null==s?void 0:null===(n=s.locationOrLoadError)||void 0===n?void 0:n.__typename)==="PythonError"?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(o.t,{icon:"error_outline",title:"Error loading code location",description:(0,r.jsxs)(i.x,{flex:{direction:"column",gap:12},style:{wordBreak:"break-word"},children:[(0,r.jsxs)("div",{children:["Code location ",(0,r.jsx)("strong",{children:l})," failed to load due to errors."]}),(0,r.jsx)("div",{children:(0,r.jsx)(c.zx,{icon:(0,r.jsx)(p.JO,{name:"error_outline"}),onClick:()=>g(!0),children:"View errors"})})]})}),(0,r.jsx)(h.p,{location:d,isOpen:j,error:s.locationOrLoadError,reloading:y,onDismiss:()=>g(!1),onTryReload:()=>v()})]}):(0,r.jsx)(o.t,{icon:"code_location",title:"Code location not found",description:(0,r.jsxs)(i.x,{flex:{direction:"column",gap:12},style:{wordBreak:"break-word"},children:[(0,r.jsxs)("div",{children:["Code location ",(0,r.jsx)("strong",{children:l})," is not available in this workspace."]}),(0,r.jsxs)("div",{children:["Check your ",(0,r.jsx)(u.rU,{to:"/deployment",children:"deployment settings"})," for errors."]})]})})};var g=t(73235),f=t(74580),y=t(35292),v=t(43212),b=t(20958),S=t(78491),w=t(69737),C=t(20171),N=t(79059),A=t(67126),E=t(17298),P=t(36381),k=t(59923),O=t(10539);function _(){let e=(0,g._)(["\n  query GraphExplorerRootQuery(\n    $graphSelector: GraphSelector\n    $rootHandleID: String!\n    $requestScopeHandleID: String\n  ) {\n    graphOrError(selector: $graphSelector) {\n      ... on Graph {\n        id\n        name\n        solidHandle(handleID: $rootHandleID) {\n          ...GraphExplorerSolidHandleFragment\n        }\n        solidHandles(parentHandleID: $requestScopeHandleID) {\n          handleID\n          solid {\n            name\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n        ...GraphExplorerFragment\n      }\n      ... on GraphNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return _=function(){return e},e}let R=e=>{(0,w.Px)();let{repoAddress:n}=e,t=(0,d.UO)(),o=(0,P.p3)(t[0]),s=o.opNames.length>1?o.opNames[o.opNames.length-2]:o.pipelineName;return(0,C.j)("Graph: ".concat(s)),(0,r.jsxs)("div",{style:{height:"100%",display:"flex",flexDirection:"column"},children:[(0,r.jsx)(f.m,{title:(0,r.jsx)(y.X6,{children:s}),tags:(0,r.jsxs)(v.V,{icon:"schema",children:["Graph in ",(0,r.jsx)(N.b,{repoAddress:n})]})}),(0,r.jsx)(i.x,{border:"top",style:{minHeight:0,flex:1,display:"flex"},children:(0,r.jsx)($,{repoAddress:n})})]})},$=e=>{let{repoAddress:n}=e,t=(0,d.UO)(),i=(0,P.p3)(t["0"]),s=(0,d.k6)(),[l,c]=(0,a.useState)({explodeComposites:!1,preferAssetRendering:!0}),p=i.opNames.slice(0,i.opNames.length-1),u=(0,b.aM)(F,{variables:{graphSelector:{repositoryName:(null==n?void 0:n.name)||"",repositoryLocationName:(null==n?void 0:n.location)||"",graphName:i.pipelineName},rootHandleID:p.join("."),requestScopeHandleID:l.explodeComposites?void 0:p.join(".")}});return(0,r.jsx)(k.g,{queryResult:u,children:t=>{let{graphOrError:a}=t;if("GraphNotFoundError"===a.__typename)return(0,r.jsx)(o.t,{icon:"error",title:"Graph not found",description:a.message});if("PythonError"===a.__typename)return(0,r.jsx)(o.t,{icon:"error",title:"Query Error",description:a.message});let d=a.solidHandle,p=l.explodeComposites?(0,A.i)(a.solidHandles):a.solidHandles;return(0,r.jsx)(E.m0,{options:l,setOptions:c,explorerPath:i,onChangeExplorerPath:(n,t)=>{let r=(0,O.$U)(e.repoAddress,"/graphs/".concat((0,P.gY)(n)));"push"===t?s.push(r):s.replace(r)},container:a,repoAddress:n,handles:p,parentHandle:d||void 0,isGraph:!0,getInvocations:e=>p.filter(n=>n.solid.definition.name===e).map(e=>({handleID:e.handleID}))})}})},F=(0,b.Ps)(_(),E.Q,E.Sm,S.B);var I=t(79106),T=t(39013),z=t(74159),M=t(88510),U=t(35505),L=t(55141),D=t(71406),V=t(44900),J=t(4128),B=t(30001);let H=e=>Array.isArray(e)?e:[],q=e=>{let{basePath:n}=(0,a.useContext)(J.I),[t,r]=(0,B.U)("".concat(n,":dagster.").concat(e),H),i=(0,a.useCallback)(e=>{r(n=>{let t=new Set(n||[]);return t.has(e)?t.delete(e):t.add(e),Array.from(t)})},[r]);return(0,a.useMemo)(()=>({expandedKeys:t,onToggle:i}),[t,i])},G=e=>{let{repoAddress:n,assets:t}=e,r=(0,x.Uz)(n),{expandedKeys:i,onToggle:o}=q("".concat(r,"-").concat("assets-virtualized-expansion-state")),s=(0,a.useMemo)(()=>{let e={};for(let n of t){let t=n.groupName||"UNGROUPED";e[t]||(e[t]=[]),e[t].push(n)}return Object.values(e).forEach(e=>{e.sort((e,n)=>D.Bl.compare((0,V.ll)(e.assetKey),(0,V.ll)(n.assetKey)))}),e},[t]);return{flattened:(0,a.useMemo)(()=>{let e=[];return Object.entries(s).sort((e,n)=>{let[t]=e,[r]=n;return D.Bl.compare(t,r)}).forEach(n=>{let[t,r]=n;e.push({type:"group",name:t,assetCount:r.length}),i.includes(t)&&r.forEach(n=>{e.push({type:"asset",id:n.id,definition:n})})}),e},[s,i]),expandedKeys:new Set(i),onToggle:o}};var Q=t(17008);let K="UNGROUPED",W=e=>{let{repoAddress:n,assets:t}=e,i=(0,a.useRef)(null),{flattened:o,expandedKeys:s,onToggle:l}=G({repoAddress:n,assets:t}),d=(0,M.MG)({count:o.length,getScrollElement:()=>i.current,estimateSize:e=>{let n=o[e];return(null==n?void 0:n.type)==="group"?48:64},overscan:5}),c=d.getTotalSize(),p=d.getVirtualItems();return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsxs)(Q.W2,{ref:i,children:[(0,r.jsx)(L.XC,{nameLabel:"Asset name"}),(0,r.jsx)(Q.Nh,{$totalHeight:c,children:p.map(e=>{let{index:t,key:i,size:a,start:d}=e,c=o[t];return"group"===c.type?(0,r.jsx)(Z,{repoAddress:n,groupName:c.name,assetCount:c.assetCount,expanded:s.has(c.name),height:a,start:d,onToggle:l},i):(0,r.jsx)(L.pN,{showCheckboxColumn:!1,definition:c.definition,path:c.definition.assetKey.path,type:"asset",repoAddress:n,showRepoColumn:!1,height:a,start:d,checked:!1,onToggleChecked:()=>{},onRefresh:()=>{}},i)})})]})})},Z=e=>{let{repoAddress:n,groupName:t,assetCount:o,expanded:s,height:l,start:a,onToggle:d}=e;return(0,r.jsx)(Y,{$height:l,$start:a,onClick:()=>d(t),$open:s,tabIndex:0,onKeyDown:e=>{("Space"===e.code||"Enter"===e.code)&&(e.preventDefault(),d(t))},children:(0,r.jsxs)(i.x,{background:T.gJ(),flex:{direction:"row",alignItems:"center",gap:8,justifyContent:"space-between"},padding:{horizontal:24},border:"bottom",style:{height:"100%"},children:[(0,r.jsxs)(i.x,{flex:{alignItems:"center",gap:8},children:[(0,r.jsx)(p.JO,{name:"asset_group"}),t===K?(0,r.jsx)("div",{children:"Ungrouped assets"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("strong",{children:t}),t!==K?(0,r.jsx)(i.x,{margin:{left:12},children:(0,r.jsx)(u.rU,{to:(0,O.$U)(n,"/asset-groups/".concat(t)),children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,r.jsx)("span",{children:"View lineage"}),(0,r.jsx)(p.JO,{name:"open_in_new",size:16,color:T.Es()})]})})}):null]})]}),(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,r.jsx)(v.V,{children:1===o?"1 asset":"".concat(o," assets")}),(0,r.jsx)(p.JO,{name:"arrow_drop_down",size:20})]})]})})},Y=(0,U.ZP)(Q.X2).withConfig({componentId:"sc-11cd9961-0"})(["cursor:pointer;:focus,:active{outline:none;}",'[aria-label="arrow_drop_down"]{transition:transform 100ms linear;',"}"],p.a1,e=>{let{$open:n}=e;return n?null:"transform: rotate(-90deg);"});var X=t(61083);function ee(){let e=(0,g._)(["\n  fragment RepoAssetTableFragment on AssetNode {\n    id\n    assetKey {\n      path\n    }\n    groupName\n    ...AssetTableDefinitionFragment\n  }\n\n  ","\n"]);return ee=function(){return e},e}function en(){let e=(0,g._)(["\n  query WorkspaceAssetsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        assetNodes {\n          id\n          ...RepoAssetTableFragment\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return en=function(){return e},e}let et=(0,b.Ps)(ee(),X.s),er=(0,b.Ps)(en(),et,S.B);var ei=t(5842),eo=t(20718),es=t(16336),el=t(82420),ea=t(4378);let ed=e=>{let{repoAddress:n}=e;(0,w.Px)();let t=(0,x.Uz)(n);(0,C.j)("Assets: ".concat(t));let s=(0,eo.$)(n),[l,d]=(0,ea.q)({queryKey:"search",defaults:{search:""}}),c=(0,b.aM)(er,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:s}}),{data:p,loading:u}=c,h=(0,es.C4)(c,es.dT),m=l.trim().toLocaleLowerCase().length>0,j=(0,a.useMemo)(()=>(null==p?void 0:p.repositoryOrError.__typename)==="Repository"?p.repositoryOrError.assetNodes:[],[p]),g=(0,el.f)(l,j);return(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(ei.h,{repoAddress:n,tab:"assets",refreshState:h}),(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},children:(0,r.jsx)(z.oi,{icon:"search",value:l,onChange:e=>d(e.target.value),placeholder:"Filter by asset name…",style:{width:"340px"}})}),u&&!p?(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(I.$,{purpose:"page"})}):u&&!p?(0,r.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(I.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:T.$()},children:"Loading assets…"})]})}):g.length?(0,r.jsx)(W,{repoAddress:n,assets:g}):m?(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No matching assets",description:(0,r.jsxs)("div",{children:["No assets matching ",(0,r.jsx)("strong",{children:l})," were found in ",t]})})}):(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No assets",description:"No assets were found in ".concat(t)})})]})};var ec=t(8355),ep=t(83738);function eu(){let e=(0,g._)(["\n  query SingleGraphQuery($selector: GraphSelector!) {\n    graphOrError(selector: $selector) {\n      ... on Graph {\n        id\n        name\n        description\n      }\n    }\n  }\n"]);return eu=function(){return e},e}let eh=e=>{let{repoAddress:n,graphs:t}=e,i=(0,a.useRef)(null),o=(0,M.MG)({count:t.length,getScrollElement:()=>i.current,estimateSize:()=>64,overscan:10}),s=o.getTotalSize(),l=o.getVirtualItems();return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsxs)(Q.W2,{ref:i,children:[(0,r.jsx)(Q.VJ,{templateColumns:"100%",sticky:!0,children:(0,r.jsx)(Q.qN,{children:"Graph"})}),(0,r.jsx)(Q.Nh,{$totalHeight:s,children:l.map(e=>{let{index:i,key:o,size:s,start:l}=e,a=t[i];return(0,r.jsx)(ex,{name:a.name,description:a.description,path:a.path,repoAddress:n,height:s,start:l},o)})})]})})},ex=e=>{let{name:n,path:t,description:o,repoAddress:s,start:l,height:d}=e,[c,p]=(0,b.td)(ej,{variables:{selector:{repositoryName:s.name,repositoryLocationName:s.location,graphName:n}}});(0,ep.v5)(c);let{data:h}=p,x=(0,a.useMemo)(()=>o||((null==h?void 0:h.graphOrError.__typename)==="Graph"?h.graphOrError.description:null),[h,o]);return(0,r.jsx)(Q.X2,{$height:d,$start:l,children:(0,r.jsx)(em,{border:"bottom",children:(0,r.jsx)(Q.E5,{children:(0,r.jsxs)(i.x,{flex:{direction:"column"},children:[(0,r.jsx)("div",{style:{whiteSpace:"nowrap",fontWeight:500},children:(0,r.jsx)(u.rU,{to:(0,O.$U)(s,t),children:n})}),x?(0,r.jsx)("div",{style:{maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"},children:(0,r.jsx)(y.YS,{style:{color:T.$(),whiteSpace:"nowrap"},children:x})}):null]})})})})},em=(0,U.ZP)(i.x).withConfig({componentId:"sc-879da1f8-0"})(["display:grid;grid-template-columns:100%;height:100%;"]),ej=(0,b.Ps)(eu());function eg(){let e=(0,g._)(["\n  fragment RepositoryGraphsFragment on Repository {\n    id\n    usedSolids {\n      definition {\n        ... on CompositeSolidDefinition {\n          id\n          name\n          description\n        }\n      }\n      invocations {\n        pipeline {\n          id\n          name\n        }\n        solidHandle {\n          handleID\n        }\n      }\n    }\n    pipelines {\n      id\n      name\n      isJob\n      graphName\n    }\n  }\n"]);return eg=function(){return e},e}function ef(){let e=(0,g._)(["\n  query WorkspaceGraphsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        ...RepositoryGraphsFragment\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return ef=function(){return e},e}let ey=(0,b.Ps)(eg()),ev=(0,b.Ps)(ef(),ey,S.B),eb=e=>{let n=Array.from(new Set(e.pipelines.filter(e=>e.isJob&&!(0,V.pv)(e.name)).map(e=>e.graphName))).map(e=>({name:e,path:"/graphs/".concat(e),description:null}));return e.usedSolids.forEach(e=>{if("CompositeSolidDefinition"===e.definition.__typename){let t=e.invocations[0];t&&n.push({name:e.definition.name,path:"/graphs/".concat(t.pipeline.name,"/").concat(t.solidHandle.handleID,"/"),description:e.definition.description})}}),n.sort((e,n)=>D.Bl.compare(e.name,n.name))},eS=e=>{let{repoAddress:n}=e;(0,w.Px)();let t=(0,x.Uz)(n);(0,C.j)("Graphs: ".concat(t));let s=(0,eo.$)(n),[l,d]=(0,ea.q)({queryKey:"search",defaults:{search:""}}),c=(0,b.aM)(ev,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:s}}),{data:p,loading:u}=c,h=(0,es.C4)(c,es.dT),m=l.trim().toLocaleLowerCase(),j=m.length>0,g=(0,a.useMemo)(()=>{let e=null==p?void 0:p.repositoryOrError;return e&&"Repository"===e.__typename?eb(e):[]},[p]),f=(0,a.useMemo)(()=>{let e=m.toLocaleLowerCase();return g.filter(n=>{let{name:t}=n;return t.toLocaleLowerCase().includes(e)})},[g,m]);return(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(ei.h,{repoAddress:n,tab:"graphs",refreshState:h}),(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},children:(0,r.jsx)(z.oi,{icon:"search",value:l,onChange:e=>d(e.target.value),placeholder:"Filter by graph name…",style:{width:"340px"}})}),u&&!p?(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(I.$,{purpose:"page"})}):u&&!p?(0,r.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(I.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:T.$()},children:"Loading graphs…"})]})}):f.length?(0,r.jsx)(eh,{repoAddress:n,graphs:f}):j?(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No matching graphs",description:(0,r.jsxs)("div",{children:["No graphs matching ",(0,r.jsx)("strong",{children:l})," were found in ",t]})})}):(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No graphs",description:"No graphs were found in ".concat(t)})})]})};var ew=t(63485);let eC=e=>{let{repoAddress:n,jobs:t}=e,i=(0,a.useRef)(null),o=(0,M.MG)({count:t.length,getScrollElement:()=>i.current,estimateSize:()=>64,overscan:10}),s=o.getTotalSize(),l=o.getVirtualItems();return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsxs)(Q.W2,{ref:i,children:[(0,r.jsx)(ew.I,{}),(0,r.jsx)(Q.Nh,{$totalHeight:s,children:l.map(e=>{let{index:i,key:o,size:s,start:l}=e,a=t[i];return(0,r.jsx)(ew.b,{name:a.name,isJob:a.isJob,repoAddress:n,height:s,start:l},o)})})]})})};var eN=t(92199),eA=t(34219),eE=t(73658);function eP(){let e=(0,g._)(["\n  query WorkspaceJobsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        pipelines {\n          id\n          name\n          isJob\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return eP=function(){return e},e}let ek=[],eO=e=>{let{repoAddress:n}=e;(0,w.Px)();let t=(0,eN.Ux)(n),s=(0,x.Uz)(n);(0,C.j)("Jobs: ".concat(s));let l=(0,eo.$)(n),[d,c]=(0,ea.q)({queryKey:"search",defaults:{search:""}}),p=(0,b.aM)(e_,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:l}}),{data:u,loading:h}=p,m=(0,es.C4)(p,es.dT),j=d.trim().toLocaleLowerCase(),g=j.length>0,f=(0,a.useMemo)(()=>(null==u?void 0:u.repositoryOrError.__typename)==="Repository"?u.repositoryOrError.pipelines:t?t.repository.pipelines:ek,[u,t]),y=f===ek;(0,eA.j$)("WorkspaceJobs",!y);let v=(0,a.useMemo)(()=>{let e=j.toLocaleLowerCase();return f.filter(n=>{let{name:t}=n;return!(0,V.pv)(t)&&t.toLocaleLowerCase().includes(e)})},[f,j]),S=!u&&h;return(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(ei.h,{repoAddress:n,tab:"jobs",refreshState:m}),(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},children:(0,r.jsx)(z.oi,{icon:"search",value:d,onChange:e=>c(e.target.value),placeholder:"Filter by job name…",style:{width:"340px"},rightElement:S?(0,r.jsx)(eE.W,{tooltipContent:"Loading jobs…"}):void 0})}),y&&!u?(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(I.$,{purpose:"page"})}):y&&!u?(0,r.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(I.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:T.$()},children:"Loading jobs…"})]})}):v.length?(0,r.jsx)(eC,{repoAddress:n,jobs:v}):g?(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No matching jobs",description:(0,r.jsxs)("div",{children:["No jobs matching ",(0,r.jsx)("strong",{children:d})," were found in ",s]})})}):(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No jobs",description:"No jobs were found in ".concat(s)})})]})},e_=(0,b.Ps)(eP(),S.B);var eR=t(49853),e$=t(89776),eF=t(53664),eI=t(19126),eT=t.n(eI),ez=t(41830),eM=t(56789);function eU(){let e=(0,g._)(["\n  fragment OpCardSolidDefinitionFragment on ISolidDefinition {\n    name\n    description\n    metadata {\n      key\n      value\n    }\n    inputDefinitions {\n      name\n    }\n    outputDefinitions {\n      name\n    }\n    ...OpNodeDefinitionFragment\n  }\n\n  ","\n"]);return eU=function(){return e},e}let eL=e=>{let{name:n,inputDefinitions:t,outputDefinitions:o}=e.definition,s=(0,eM.og)({name:n,inputs:t.map(e=>({definition:e,dependsOn:[]})),outputs:o.map(e=>({definition:e,dependedBy:[]})),definition:{description:null,assetNodes:[]}},{x:0,y:0});return(0,r.jsx)(i.x,{padding:24,children:(0,r.jsx)(eV,{style:{height:s.bounds.height},children:(0,r.jsx)(ez.Un,{invocation:void 0,definition:e.definition,minified:!1,onClick:()=>{},onDoubleClick:()=>{},onEnterComposite:()=>{},onHighlightEdges:()=>{},layout:s,selected:!1,focused:!1,highlightedEdges:[],dim:!1})})})},eD=(0,b.Ps)(eU(),ez.WH),eV=U.ZP.div.withConfig({componentId:"sc-9cf19fed-0"})(["flex:1;max-width:450px;position:relative;"]);var eJ=t(96266);function eB(){let e=(0,g._)(["\n  query UsedSolidDetailsQuery($name: String!, $repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolid(name: $name) {\n          definition {\n            ...OpCardSolidDefinitionFragment\n            ...SidebarOpDefinitionFragment\n          }\n          invocations {\n            pipeline {\n              id\n              name\n            }\n            solidHandle {\n              handleID\n            }\n          }\n        }\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return eB=function(){return e},e}let eH=e=>{let{name:n,onClickInvocation:t,repoAddress:i}=e,o=(0,eo.$)(i),s=(0,b.aM)(eq,{variables:{name:n,repositorySelector:o}});return(0,r.jsx)(k.g,{queryResult:s,children:e=>{let{repositoryOrError:n}=e;if(!((null==n?void 0:n.__typename)==="Repository"&&n.usedSolid))return null;let i=n.usedSolid;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eL,{definition:i.definition}),(0,r.jsx)(eJ.I,{definition:i.definition,showingSubgraph:!1,onClickInvocation:t,getInvocations:()=>i.invocations.map(e=>({handleID:e.solidHandle.handleID,pipelineName:e.pipeline.name}))})]})}})},eq=(0,b.Ps)(eB(),eD,eJ.u),eG=U.ZP.div.withConfig({componentId:"sc-d5331a42-0"})(["overflow-y:scroll;flex:1;"]);var eQ=t(13233);function eK(){let e=(0,g._)(["\n  query OpsRootQuery($repositorySelector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $repositorySelector) {\n      ... on Repository {\n        id\n        usedSolids {\n          ...OpsRootUsedSolid\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment OpsRootUsedSolid on UsedSolid {\n    definition {\n      name\n      ...OpTypeSignatureFragment\n    }\n    invocations {\n      pipeline {\n        id\n        isJob\n        name\n      }\n    }\n  }\n\n  ","\n  ","\n"]);return eK=function(){return e},e}function eW(e){let n={};for(let t of e)for(let e of t)n[e]=!0;return Object.keys(n).sort((e,n)=>e.localeCompare(n))}let eZ=e=>{(0,w.Px)(),(0,C.j)("Ops");let{name:n}=(0,d.UO)(),{repoAddress:t}=e,i=(0,eo.$)(t),o=(0,b.aM)(e0,{variables:{repositorySelector:i}});return(0,r.jsx)("div",{style:{flex:1,minHeight:0},children:(0,r.jsx)(k.g,{queryResult:o,children:i=>{let{repositoryOrError:o}=i;return(null==o?void 0:o.__typename)==="Repository"&&o.usedSolids?(0,r.jsx)(eY,{...e,name:n,repoAddress:t,usedSolids:o.usedSolids}):null}})})},eY=e=>{let{name:n,repoAddress:t,usedSolids:s}=e,l=(0,d.k6)(),c=(0,d.TH)(),{q:p,typeExplorer:u}=eT().parse(c.search,{ignoreQueryPrefix:!0}),h=[{token:"name",values:()=>s.map(e=>e.definition.name)},{token:"job",values:()=>eW(s.map(e=>e.invocations.filter(e=>!e.pipeline.isJob).map(e=>e.pipeline.name)))},{token:"pipeline",values:()=>eW(s.map(e=>e.invocations.filter(e=>e.pipeline.isJob).map(e=>e.pipeline.name)))},{token:"input",values:()=>eW(s.map(e=>e.definition.inputDefinitions.map(e=>e.type.displayName)))},{token:"output",values:()=>eW(s.map(e=>e.definition.outputDefinitions.map(e=>e.type.displayName)))}],x=(0,eR.HE)(p||"",h),m=s.filter(e=>{for(let n of x)if(("name"===n.token||void 0===n.token)&&!e.definition.name.startsWith(n.value)||("pipeline"===n.token||"job"===n.token)&&!e.invocations.some(e=>e.pipeline.name===n.value)||"input"===n.token&&!e.definition.inputDefinitions.some(e=>e.type.displayName.startsWith(n.value))||"output"===n.token&&!e.definition.outputDefinitions.some(e=>e.type.displayName.startsWith(n.value)))return!1;return!0}),j=(0,a.useMemo)(()=>[...m].sort((e,n)=>D.Bl.compare(e.definition.name,n.definition.name)),[m]),g=s.find(e=>e.definition.name===n),f=e=>{l.replace({search:"?".concat(eT().stringify({q:(0,eR.jP)(e)}))})},y=e=>{l.replace((0,O.$U)(t,"/ops/".concat(e,"?").concat(eT().stringify({q:p}))))};a.useEffect(()=>{1!==j.length||g&&j[0]===g||y(j[0].definition.name),"string"==typeof u&&f([...x,{token:"input",value:u}])});let v=a.useCallback(e=>{let{pipelineName:n,handleID:r}=e;l.push((0,O.$U)(t,"/pipeline_or_job/".concat(n,"/").concat(r.split(".").join("/"))))},[l,t]);return(0,r.jsx)("div",{style:{height:"100%",display:"flex"},children:(0,r.jsx)(e$.O,{identifier:"ops",firstInitialPercent:40,firstMinSize:448,first:(0,r.jsxs)(e2,{children:[(0,r.jsx)(i.x,{padding:{vertical:12,horizontal:24},border:"bottom",children:(0,r.jsx)(eR.Gf,{values:x,onChange:e=>f(e),suggestionProviders:h,placeholder:"Filter by name or input/output type..."})}),(0,r.jsx)("div",{style:{flex:1,overflow:"hidden"},children:(0,r.jsx)(eX,{selected:g,onClickOp:y,items:j})})]}),second:g?(0,r.jsx)(eG,{children:(0,r.jsx)(eH,{name:g.definition.name,onClickInvocation:v,repoAddress:t})}):(0,r.jsx)(i.x,{padding:{vertical:64},children:(0,r.jsx)(o.t,{icon:"no-results",title:"No op selected",description:"Select an op to see its definition and invocations"})})})})},eX=e=>{let{items:n,selected:t}=e,i=(0,a.useRef)(null),o=(0,M.MG)({count:n.length,getScrollElement:()=>i.current,estimateSize:()=>42,overscan:10}),s=o.getTotalSize(),l=o.getVirtualItems(),d=t?n.findIndex(e=>e===t):void 0;return(0,r.jsx)(Q.W2,{ref:i,children:(0,r.jsx)(Q.Nh,{$totalHeight:s,children:l.map(t=>{let{index:i,size:o,start:s}=t,l=n[i];return(0,r.jsx)(Q.X2,{$height:o,$start:s,children:(0,r.jsx)(e1,{$selected:d===i,onClick:()=>e.onClickOp(l.definition.name),children:(0,r.jsx)(eF.g,{text:l.definition.name})})},l.definition.name)})})})},e0=(0,b.Ps)(eK(),eQ.C,S.B),e1=U.ZP.div.withConfig({componentId:"sc-eb64a06a-0"})(["background:",";box-shadow:"," 4px 0 0 inset,"," 0 -1px 0 inset;color:",";cursor:pointer;font-size:14px;gap:8px;padding:12px 24px;user-select:none;overflow:hidden;white-space:nowrap;"],e=>{let{$selected:n}=e;return n?T.gJ():T.v8()},e=>{let{$selected:n}=e;return n?T.L$():"transparent"},T.wL(),e=>{let{$selected:n}=e;return n?T.Ep():T.$()}),e2=U.ZP.div.withConfig({componentId:"sc-eb64a06a-1"})(["display:flex;flex-direction:column;height:100%;"]),e4=e=>{let{repoAddress:n}=e;(0,w.Px)();let t=(0,x.Uz)(n);return(0,C.j)("Ops: ".concat(t)),(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(ei.h,{repoAddress:n,tab:"ops"}),(0,r.jsx)(eZ,{repoAddress:n})]})};var e6=t(35002),e3=t(27028),e8=t(87209);let e5=e=>{let{repoAddress:n,schedules:t,headerCheckbox:i,checkedKeys:o,onToggleCheckFactory:s}=e,l=a.useRef(null),d=(0,M.MG)({count:t.length,getScrollElement:()=>l.current,estimateSize:()=>64,overscan:10}),c=d.getTotalSize(),p=d.getVirtualItems();return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsxs)(Q.W2,{ref:l,children:[(0,r.jsx)(e3.og,{checkbox:i}),(0,r.jsx)(Q.Nh,{$totalHeight:c,children:p.map(e=>{let{index:l,key:a,size:d,start:c}=e,p=t[l],u=(0,e8.g)(n,p.name);return(0,r.jsx)(e3.iT,{name:p.name,repoAddress:n,scheduleState:p.scheduleState,checked:o.has(u),showCheckboxColumn:!!i,onToggleChecked:s(u),height:d,start:c},a)})})]})})};var e9=t(52154),e7=t(77044),ne=t(17702),nn=t(70468),nt=t(74302),nr=t(2389),ni=t(2949);function no(){let e=(0,g._)(["\n  query WorkspaceSchedulesQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        schedules {\n          id\n          name\n          description\n          scheduleState {\n            id\n            ...BasicInstigationStateFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return no=function(){return e},e}let ns=[],nl=e=>{let{repoAddress:n}=e;(0,w.Px)();let t=(0,eN.Ux)(n),s=(0,x.Uz)(n);(0,C.j)("Schedules: ".concat(s));let l=(0,eo.$)(n),[d,c]=(0,ea.q)({queryKey:"search",defaults:{search:""}}),p=(0,ni.g)(),u=(0,a.useMemo)(()=>[p],[p]),{button:h,activeFiltersJsx:m}=(0,nt.m)({filters:u}),j=(0,b.aM)(na,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:l}}),{data:g,loading:f}=j,y=(0,es.C4)(j,es.dT),v=d.trim().toLocaleLowerCase(),S=v.length>0,N=(0,a.useMemo)(()=>(null==g?void 0:g.repositoryOrError.__typename)==="Repository"?g.repositoryOrError.schedules:t?t.repository.schedules:ns,[g,t]),A=ns===N,{state:E}=p,P=(0,a.useMemo)(()=>E.size?N.filter(e=>{let{scheduleState:n}=e;return E.has(n.status)}):N,[N,E]),k=(0,a.useMemo)(()=>{let e=v.toLocaleLowerCase();return P.filter(n=>{let{name:t}=n;return t.toLocaleLowerCase().includes(e)})},[P,v]),O=k.length>0,_=(0,a.useMemo)(()=>k.filter(e=>{let{scheduleState:n}=e;return(0,e7.i)(n)}),[k]),R=(0,a.useMemo)(()=>_.map(e=>{let{name:t}=e;return(0,e8.g)(n,t)}),[_,n]),[{checkedIds:$},{onToggleFactory:F,onToggleAll:M}]=(0,e9.a)(R),U=(0,a.useMemo)(()=>_.filter(e=>{let{name:t}=e;return $.has((0,e8.g)(n,t))}).map(e=>{let{name:t,scheduleState:r}=e;return{repoAddress:n,scheduleName:t,scheduleState:r}}),[_,$,n]),L=R.length,D=$.size,V=R.length>0,J=f&&!g;return(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(ei.h,{repoAddress:n,tab:"schedules",refreshState:y}),(0,r.jsxs)(i.x,{padding:{horizontal:24,vertical:16},flex:{justifyContent:"space-between"},children:[(0,r.jsxs)(i.x,{flex:{direction:"row",gap:12},children:[h,(0,r.jsx)(z.oi,{icon:"search",value:d,onChange:e=>{c(e.target.value),M(!1)},placeholder:"Filter by schedule name…",style:{width:"340px"},rightElement:J?(0,r.jsx)(eE.W,{tooltipContent:"Loading schedules…"}):void 0})]}),(0,r.jsx)(e6.u,{content:"You do not have permission to start or stop these schedules",canShow:O&&!V,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,r.jsx)(nn._,{schedules:U,onDone:()=>y.refetch()})})]}),m.length?(0,r.jsx)(i.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:m}):null,A&&!g?(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(I.$,{purpose:"page"})}):A&&!g?(0,r.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(I.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:T.$()},children:"Loading schedules…"})]})}):k.length?(0,r.jsx)(e5,{repoAddress:n,schedules:k,headerCheckbox:V?(0,r.jsx)(nr.W,{checkedCount:D,totalCount:L,onToggleAll:M}):void 0,checkedKeys:$,onToggleCheckFactory:F}):S?(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No matching schedules",description:(0,r.jsxs)("div",{children:["No schedules matching ",(0,r.jsx)("strong",{children:d})," were found in ",s]})})}):(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No schedules",description:"No schedules were found in ".concat(s)})})]})},na=(0,b.Ps)(no(),ne.i,S.B);var nd=t(53029),nc=t(40389);let np=e=>{let{repoAddress:n,sensors:t,headerCheckbox:i,checkedKeys:o,onToggleCheckFactory:s}=e,l=a.useRef(null),d=(0,M.MG)({count:t.length,getScrollElement:()=>l.current,estimateSize:()=>64,overscan:10}),c=d.getTotalSize(),p=d.getVirtualItems();return(0,r.jsx)("div",{style:{overflow:"hidden"},children:(0,r.jsxs)(Q.W2,{ref:l,children:[(0,r.jsx)(nd.KF,{checkbox:i}),(0,r.jsx)(Q.Nh,{$totalHeight:c,children:p.map(e=>{let{index:l,key:a,size:d,start:c}=e,p=t[l],u=(0,nc.x)(n,p.name);return(0,r.jsx)(nd.Rx,{name:p.name,repoAddress:n,sensorState:p.sensorState,checked:o.has(u),showCheckboxColumn:!!i,onToggleChecked:s(u),height:d,start:c},a)})})]})})};var nu=t(64265);function nh(){let e=(0,g._)(["\n  query WorkspaceSensorsQuery($selector: RepositorySelector!) {\n    repositoryOrError(repositorySelector: $selector) {\n      ... on Repository {\n        id\n        name\n        sensors {\n          id\n          name\n          description\n          sensorState {\n            id\n            ...BasicInstigationStateFragment\n          }\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n  ","\n"]);return nh=function(){return e},e}let nx=[],nm=e=>{let{repoAddress:n}=e;(0,w.Px)();let t=(0,eN.Ux)(n),s=(0,x.Uz)(n);(0,C.j)("Sensors: ".concat(s));let l=(0,eo.$)(n),[d,c]=(0,ea.q)({queryKey:"search",defaults:{search:""}}),p=(0,ni.g)(),u=(0,a.useMemo)(()=>[p],[p]),{button:h,activeFiltersJsx:m}=(0,nt.m)({filters:u}),j=(0,b.aM)(nj,{fetchPolicy:"network-only",notifyOnNetworkStatusChange:!0,variables:{selector:l}}),{data:g,loading:f}=j,y=(0,es.C4)(j,es.dT),v=d.trim().toLocaleLowerCase(),S=v.length>0,N=(0,a.useMemo)(()=>(null==g?void 0:g.repositoryOrError.__typename)==="Repository"?g.repositoryOrError.sensors:t?t.repository.sensors:nx,[t,g]),A=nx===N,{state:E}=p,P=(0,a.useMemo)(()=>E.size?N.filter(e=>{let{sensorState:n}=e;return E.has(n.status)}):N,[N,E]),k=(0,a.useMemo)(()=>{let e=v.toLocaleLowerCase();return P.filter(n=>{let{name:t}=n;return t.toLocaleLowerCase().includes(e)})},[P,v]),O=k.length>0,_=(0,a.useMemo)(()=>k.filter(e=>{let{sensorState:n}=e;return(0,e7.i)(n)}),[k]),R=(0,a.useMemo)(()=>_.map(e=>{let{name:t}=e;return(0,nc.x)(n,t)}),[_,n]),[{checkedIds:$},{onToggleFactory:F,onToggleAll:M}]=(0,e9.a)(R),U=(0,a.useMemo)(()=>_.filter(e=>{let{name:t}=e;return $.has((0,nc.x)(n,t))}).map(e=>{let{name:t,sensorState:r}=e;return{repoAddress:n,sensorName:t,sensorState:r}}),[_,$,n]),L=R.length,D=$.size,V=R.length>0,J=f&&!g;return(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,r.jsx)(ei.h,{repoAddress:n,tab:"sensors",refreshState:y}),(0,r.jsxs)(i.x,{padding:{horizontal:24,vertical:16},flex:{justifyContent:"space-between"},children:[(0,r.jsxs)(i.x,{flex:{direction:"row",gap:12},children:[h,(0,r.jsx)(z.oi,{icon:"search",value:d,onChange:e=>c(e.target.value),placeholder:"Filter by sensor name…",style:{width:"340px"},rightElement:J?(0,r.jsx)(eE.W,{tooltipContent:"Loading sensors…"}):void 0})]}),(0,r.jsx)(e6.u,{content:"You do not have permission to start or stop these sensors",canShow:O&&!V,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,r.jsx)(nu.b,{sensors:U,onDone:()=>y.refetch()})})]}),m.length?(0,r.jsx)(i.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:m}):null,A&&!g?(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(I.$,{purpose:"page"})}):A&&!g?(0,r.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},style:{paddingTop:"100px"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:16},children:[(0,r.jsx)(I.$,{purpose:"body-text"}),(0,r.jsx)("div",{style:{color:T.$()},children:"Loading sensors…"})]})}):k.length?(0,r.jsx)(np,{repoAddress:n,sensors:k,headerCheckbox:V?(0,r.jsx)(nr.W,{checkedCount:D,totalCount:L,onToggleAll:M}):void 0,checkedKeys:$,onToggleCheckFactory:F}):S?(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No matching sensors",description:(0,r.jsxs)("div",{children:["No sensors matching ",(0,r.jsx)("strong",{children:d})," were found in ",s]})})}):(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No sensors",description:"No sensors were found in ".concat(s)})})]})},nj=(0,b.Ps)(nh(),ne.i,S.B);var ng=t(4199),nf=t(49438),ny=t(17872),nv=t(49308),nb=t(73407),nS=t(54044),nw=t(18436),nC=t(39268),nN=t(71348);let nA=()=>{let{paused:e}=(0,nN.dx)();return(0,r.jsx)(e6.u,{content:e?"Auto-materializing is paused. New materializations will not be triggered by auto-materialization policies.":"",canShow:e,children:(0,r.jsx)(u.rU,{to:"/health",style:{outline:"none"},children:(0,r.jsx)(v.V,{icon:e?"toggle_off":"toggle_on",intent:e?"warning":"success",children:e?"Auto-materialize off":"Auto-materialize on"})})})};var nE=t(75442),nP=t(53448),nk=t(89918),nO=t(72447);function n_(){let e=(0,g._)(["\n  query AssetGroupMetadataQuery($selector: AssetGroupSelector!) {\n    assetNodes(group: $selector) {\n      id\n      autoMaterializePolicy {\n        __typename\n      }\n    }\n  }\n"]);return n_=function(){return e},e}let nR=e=>{let{repoAddress:n,tab:t}=e;(0,w.Px)();let{groupName:o,0:s}=(0,d.UO)(),l=(0,d.k6)();(0,C.j)("Asset Group: ".concat(o));let c=(0,O.$U)(n,"/asset-groups/".concat(o)),p=(0,a.useMemo)(()=>({groupName:o,repositoryLocationName:n.location,repositoryName:n.name}),[o,n]),u=(0,a.useCallback)((e,n)=>{l[n]({pathname:"".concat(c,"/").concat((0,P.gY)(e)),search:l.location.search})},[c,l]),h=(0,a.useCallback)((e,n)=>{let t;t=n.groupName&&n.repoAddress?(0,O.$U)(n.repoAddress,"/asset-groups/".concat(n.groupName,"/lineage/").concat(n.assetKey.path.map(encodeURIComponent).join("/"))):(0,nE.p)(n.assetKey,{view:"definition"}),e.metaKey?window.open(t,"_blank"):l.push(t)},[l]),x=a.useMemo(()=>({groupSelector:p}),[p]),m=a.useMemo(()=>({preferAssetRendering:!0,explodeComposites:!0}),[]);return(0,r.jsxs)(nv.T,{style:{display:"flex",flexDirection:"column",paddingBottom:0},children:[(0,r.jsx)(f.m,{title:(0,r.jsx)(y.X6,{children:o}),right:(0,r.jsx)(nO.i,{label:"Reload definitions"}),tags:(0,r.jsx)(nF,{groupSelector:p,repoAddress:n}),tabs:(0,r.jsxs)(i.x,{flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},margin:{right:4},children:[(0,r.jsxs)(nb.mQ,{selectedTabId:t,children:[(0,r.jsx)(nk.f,{id:"lineage",title:"Lineage",to:"".concat(c,"/lineage")}),(0,r.jsx)(nk.f,{id:"list",title:"List",to:"".concat(c,"/list")})]}),(0,r.jsx)(nS.wP,{})]})}),"lineage"===t?(0,r.jsx)(nP.OK,{fetchOptions:x,options:m,explorerPath:(0,P.p3)(s||"lineage/"),onChangeExplorerPath:u,onNavigateToSourceAssetNode:h,viewType:V._4.GROUP}):(0,r.jsx)(nw.fv,{groupSelector:p,prefixPath:s.split("/").map(decodeURIComponent).filter(Boolean),setPrefixPath:e=>l.push("".concat(c,"/list/").concat(e.map(encodeURIComponent).join("/")))})]})},n$=(0,b.Ps)(n_()),nF=e=>{let{repoAddress:n,groupSelector:t}=e,i=(0,nC.I)(),{data:o}=(0,b.aM)(n$,{variables:{selector:t}});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(v.V,{icon:"asset_group",children:["Asset Group in ",(0,r.jsx)(N.b,{repoAddress:n})]}),(()=>{let e=null==o?void 0:o.assetNodes;return e&&0!==e.length&&"has-global-amp"===i&&e.some(e=>!!e.autoMaterializePolicy)?(0,r.jsx)(nA,{}):null})()]})},nI=e=>{let{repoAddress:n}=e;return(0,r.jsx)(y.X6,{children:(0,r.jsxs)(i.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)("div",{children:(0,r.jsx)(u.rU,{to:"/deployment/locations",children:"Code locations"})}),(0,r.jsx)("div",{children:"/"}),(0,r.jsx)("div",{children:(0,x.Uz)(n)})]})})};var nT=t(14277),nz=t(12576);let nM=e=>{let{repoAddress:n}=e,{locationEntries:t,loading:i}=(0,a.useContext)(ec.C5),o=t.find(e=>e.name===n.location);return(0,r.jsx)(f.m,{title:(0,r.jsx)(nI,{repoAddress:n}),right:i||!o?null:(0,r.jsxs)(c.zH,{children:[(0,r.jsx)(nz.hN,{location:n.location}),(0,r.jsx)(nT.c5,{locationNode:o})]})})},nU=e=>{let{repoAddress:n,selectedTab:t}=e;return(0,r.jsxs)(nb.mQ,{selectedTabId:t,children:[(0,r.jsx)(nk.f,{id:"overview",title:"Overview",to:(0,O.$U)(n,"/")}),(0,r.jsx)(nk.f,{id:"definitions",title:"Definitions",to:(0,O.$U)(n,"/definitions")})]})},nL=e=>{let{items:n,placeholder:t,nameFilter:s,renderRow:l}=e,[d,c]=(0,a.useState)(""),p=(0,a.useCallback)(e=>{c(e.target.value)},[]),u=d.trim().toLowerCase(),h=n.filter(e=>s(e,u)),x=(0,a.useRef)(null),m=(0,M.MG)({count:h.length,getScrollElement:()=>x.current,estimateSize:()=>44,overscan:10}),j=m.getTotalSize(),g=m.getVirtualItems();return(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{overflow:"hidden"},children:[(0,r.jsx)(i.x,{padding:{vertical:8,horizontal:24},children:(0,r.jsx)(z.oi,{value:d,onChange:p,placeholder:t,style:{width:"300px"},icon:"search"})}),(0,r.jsx)("div",{style:{flex:1,overflow:"hidden"},children:(0,r.jsxs)(Q.W2,{ref:x,children:[(0,r.jsx)(Q.VJ,{templateColumns:"1fr",sticky:!0,children:(0,r.jsx)(Q.qN,{children:"Name"})}),g.length>0?(0,r.jsx)(Q.Nh,{$totalHeight:j,children:g.map(e=>{let{index:n,key:t,size:i,start:o}=e,s=h[n];return(0,r.jsx)(Q.X2,{$height:i,$start:o,children:l(s)},t)})}):(0,r.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},padding:{top:32},children:(0,r.jsx)(o.t,{icon:"search",title:"No matching results",description:(0,r.jsxs)(r.Fragment,{children:["No matching results for query ",(0,r.jsx)("strong",{children:d})," found in this code location."]})})})]})})]})},nD=e=>{let{iconName:n,label:t,path:o}=e;return(0,r.jsx)(i.x,{padding:{horizontal:24},border:"bottom",flex:{direction:"column",justifyContent:"center",alignItems:"flex-start"},style:{height:44,overflow:"hidden"},children:(0,r.jsx)(nV,{to:o,style:{width:"100%",overflow:"hidden"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(p.JO,{name:n,color:T.Es()}),(0,r.jsx)("div",{style:{flex:1,overflow:"hidden"},children:(0,r.jsx)(eF.g,{text:t})})]})})})},nV=(0,U.ZP)(u.rU).withConfig({componentId:"sc-cd67af81-0"})([":active,:focus{outline:none;}"]),nJ=e=>{let{repoAddress:n}=e,[t,l]=(0,a.useState)(""),d=(0,x.Uz)(n),c=(0,eo.$)(n),{data:p,loading:u}=(0,b.aM)(er,{variables:{selector:c}}),h=(0,a.useMemo)(()=>(null==p?void 0:p.repositoryOrError.__typename)==="Repository"?p.repositoryOrError.assetNodes:[],[p]),m=(0,el.f)(t,h),{flattened:j,expandedKeys:g,onToggle:f}=G({repoAddress:n,assets:m}),y=(0,a.useCallback)(e=>{l(e.target.value)},[]),v=(0,a.useRef)(null),S=(0,M.MG)({count:j.length,getScrollElement:()=>v.current,estimateSize:()=>44,overscan:10}),w=S.getTotalSize(),C=S.getVirtualItems();return(0,r.jsxs)(i.x,{flex:{direction:"column"},style:{overflow:"hidden"},children:[(0,r.jsx)(i.x,{padding:{vertical:8,horizontal:24},children:(0,r.jsx)(z.oi,{value:t,onChange:y,placeholder:"Search assets by key…",style:{width:"300px"},icon:"search"})}),(0,r.jsx)("div",{style:{flex:1,overflow:"hidden"},children:u&&!p?(0,r.jsx)(i.x,{flex:{direction:"row",justifyContent:"center"},padding:32,children:(0,r.jsx)(s.f,{label:"Loading assets…"})}):m.length?(0,r.jsxs)(Q.W2,{ref:v,children:[(0,r.jsx)(Q.VJ,{templateColumns:"1fr",sticky:!0,children:(0,r.jsx)(Q.qN,{children:"Name"})}),(0,r.jsx)(Q.Nh,{$totalHeight:w,children:C.map(e=>{let{index:n,key:t,size:i,start:o}=e,s=j[n];if("group"===s.type)return(0,r.jsx)(nB,{height:i,start:o,expanded:g.has(s.name),groupName:s.name,assetCount:s.assetCount,onToggle:f},t);let{path:l}=s.definition.assetKey;return(0,r.jsx)(Q.X2,{$height:i,$start:o,children:(0,r.jsx)(nD,{iconName:"asset",label:(0,V.ll)({path:l}),path:(0,nE.p)({path:l})})},t)})})]}):t.trim().length>0?(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No matching assets",description:(0,r.jsxs)("div",{children:["No assets matching ",(0,r.jsx)("strong",{children:t})," were found in ",d]})})}):(0,r.jsx)(i.x,{padding:{top:20},children:(0,r.jsx)(o.t,{icon:"search",title:"No assets",description:"No assets were found in ".concat(d)})})})]})},nB=e=>{let{groupName:n,assetCount:t,expanded:o,height:s,start:l,onToggle:a}=e;return(0,r.jsx)(nH,{$height:s,$start:l,onClick:()=>a(n),$open:o,tabIndex:0,onKeyDown:e=>{("Space"===e.code||"Enter"===e.code)&&(e.preventDefault(),a(n))},children:(0,r.jsxs)(i.x,{background:T.gJ(),flex:{direction:"row",alignItems:"center",gap:8,justifyContent:"space-between"},padding:{horizontal:24},border:"bottom",style:{height:"100%"},children:[(0,r.jsxs)(i.x,{flex:{alignItems:"center",gap:8},children:[(0,r.jsx)(p.JO,{name:"asset_group"}),"UNGROUPED"===n?(0,r.jsx)("div",{children:"Ungrouped assets"}):(0,r.jsx)("strong",{children:n})]}),(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,r.jsx)(v.V,{children:1===t?"1 asset":"".concat(t," assets")}),(0,r.jsx)(p.JO,{name:"arrow_drop_down",size:20})]})]})})},nH=(0,U.ZP)(Q.X2).withConfig({componentId:"sc-ba960fa3-0"})(["cursor:pointer;:focus,:active{outline:none;}",'[aria-label="arrow_drop_down"]{transition:transform 100ms linear;',"}"],p.a1,e=>{let{$open:n}=e;return n?null:"transform: rotate(-90deg);"});var nq=t(23399);let nG=e=>{let{repoAddress:n}=e,t=(0,eo.$)(n),{data:l,loading:d}=(0,b.aM)(ev,{variables:{selector:t}}),c=(0,a.useMemo)(()=>{let e=null==l?void 0:l.repositoryOrError;return e&&"Repository"===e.__typename?eb(e):[]},[l]),p=(0,x.Uz)(n);return d?(0,r.jsx)(i.x,{padding:64,flex:{direction:"row",justifyContent:"center"},children:(0,r.jsx)(s.f,{label:"Loading graphs…"})}):l&&l.repositoryOrError?"PythonError"===l.repositoryOrError.__typename?(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(nq.T9,{error:l.repositoryOrError})}):"RepositoryNotFoundError"===l.repositoryOrError.__typename?(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(o.t,{icon:"op",title:"Repository not found",description:"The repository ".concat(p," could not be found in this workspace.")})}):c.length?(0,r.jsx)(nL,{items:c,placeholder:"Search graphs by name…",nameFilter:(e,n)=>e.name.toLowerCase().includes(n),renderRow:e=>(0,r.jsx)(nD,{iconName:"graph",label:e.name,path:(0,O.$U)(n,e.path)})}):(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(o.t,{icon:"graph",title:"No graphs found",description:"The repository ".concat(p," does not contain any graphs.")})}):(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(o.t,{icon:"graph",title:"An unexpected error occurred",description:"An error occurred while loading graphs for ".concat(p)})})},nQ=e=>{let{repoAddress:n}=e,{name:t}=(0,d.UO)(),l=(0,eo.$)(n),{data:a,loading:c}=(0,b.aM)(e0,{variables:{repositorySelector:l}}),p=(0,x.Uz)(n);if(c)return(0,r.jsx)(i.x,{padding:64,flex:{direction:"row",justifyContent:"center"},children:(0,r.jsx)(s.f,{label:"Loading ops…"})});if(!a||!a.repositoryOrError)return(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(o.t,{icon:"op",title:"An unexpected error occurred",description:"An error occurred while loading ops for ".concat(p)})});if("PythonError"===a.repositoryOrError.__typename)return(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(nq.T9,{error:a.repositoryOrError})});if("RepositoryNotFoundError"===a.repositoryOrError.__typename)return(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(o.t,{icon:"op",title:"Repository not found",description:"The repository ".concat(p," could not be found in this workspace.")})});let{repositoryOrError:u}=a,{usedSolids:h}=u;return h.length?(0,r.jsx)(eY,{name:t,repoAddress:n,usedSolids:h}):(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(o.t,{icon:"op",title:"No ops found",description:"The repository ".concat((0,x.Uz)(n)," does not contain any ops.")})})},nK=e=>{let{repoAddress:n,repository:t}=e;return(0,r.jsx)(i.x,{flex:{direction:"column",alignItems:"stretch"},style:{flex:1,overflow:"hidden"},children:(0,r.jsxs)(d.rs,{children:[(0,r.jsx)(ny.A,{path:"/locations/:repoPath/assets",children:(0,r.jsx)(nJ,{repoAddress:n})}),(0,r.jsx)(ny.A,{path:"/locations/:repoPath/jobs",children:(0,r.jsx)(nW,{repoAddress:n,repository:t})}),(0,r.jsx)(ny.A,{path:"/locations/:repoPath/sensors",children:(0,r.jsx)(nZ,{repoAddress:n,repository:t})}),(0,r.jsx)(ny.A,{path:"/locations/:repoPath/schedules",children:(0,r.jsx)(nY,{repoAddress:n,repository:t})}),(0,r.jsx)(ny.A,{path:"/locations/:repoPath/resources",children:(0,r.jsx)(nX,{repoAddress:n,repository:t})}),(0,r.jsx)(ny.A,{path:"/locations/:repoPath/graphs",children:(0,r.jsx)(nG,{repoAddress:n})}),(0,r.jsx)(ny.A,{path:"/locations/:repoPath/ops/:name?",children:(0,r.jsx)(nQ,{repoAddress:n})})]})})},nW=e=>{let{repoAddress:n,repository:t}=e,s=(0,a.useMemo)(()=>t.pipelines.filter(e=>{let{name:n}=e;return!(0,V.pv)(n)}).sort((e,n)=>D.Bl.compare(e.name,n.name)),[t]);return s.length?(0,r.jsx)(nL,{items:s,placeholder:"Search jobs by name…",nameFilter:(e,n)=>e.name.toLowerCase().includes(n),renderRow:e=>(0,r.jsx)(nD,{iconName:"job",label:e.name,path:(0,O.$U)(n,"/jobs/".concat(e.name))})}):(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(o.t,{icon:"job",title:"No jobs found",description:"The repository ".concat((0,x.Uz)(n)," does not contain any jobs.")})})},nZ=e=>{let{repoAddress:n,repository:t}=e,s=(0,a.useMemo)(()=>[...t.sensors].sort((e,n)=>D.Bl.compare(e.name,n.name)),[t]);return s.length?(0,r.jsx)(nL,{items:s,placeholder:"Search sensors by name…",nameFilter:(e,n)=>e.name.toLowerCase().includes(n),renderRow:e=>(0,r.jsx)(nD,{iconName:"sensors",label:e.name,path:(0,O.$U)(n,"/sensors/".concat(e.name))})}):(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(o.t,{icon:"sensors",title:"No sensors found",description:"The repository ".concat((0,x.Uz)(n)," does not contain any sensors.")})})},nY=e=>{let{repoAddress:n,repository:t}=e,s=(0,a.useMemo)(()=>[...t.schedules].sort((e,n)=>D.Bl.compare(e.name,n.name)),[t]);return s.length?(0,r.jsx)(nL,{items:s,placeholder:"Search schedules by name…",nameFilter:(e,n)=>e.name.toLowerCase().includes(n),renderRow:e=>(0,r.jsx)(nD,{iconName:"schedule",label:e.name,path:(0,O.$U)(n,"/schedules/".concat(e.name))})}):(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(o.t,{icon:"schedule",title:"No schedules found",description:"The repository ".concat((0,x.Uz)(n)," does not contain any schedules.")})})},nX=e=>{let{repoAddress:n,repository:t}=e,s=(0,a.useMemo)(()=>[...t.allTopLevelResourceDetails].sort((e,n)=>D.Bl.compare(e.name,n.name)),[t]);return s.length?(0,r.jsx)(nL,{items:s,placeholder:"Search resources by name…",nameFilter:(e,n)=>e.name.toLowerCase().includes(n),renderRow:e=>(0,r.jsx)(nD,{iconName:"resource",label:e.name,path:(0,O.$U)(n,"/resources/".concat(e.name))})}):(0,r.jsx)(i.x,{padding:64,children:(0,r.jsx)(o.t,{icon:"resource",title:"No resources found",description:"The repository ".concat((0,x.Uz)(n)," does not contain any resources.")})})};var n0=t(91319),n1=t(70812);let n2=e=>{let{repoAddress:n,repository:t}=e,{pathname:o}=(0,d.TH)(),s=t.assetGroups.length,l=t.pipelines.filter(e=>{let{name:n}=e;return!(0,V.pv)(n)}).length,a=t.schedules.length,c=t.sensors.length,u=t.allTopLevelResourceDetails.length,h=[{key:"assets",type:"link",icon:(0,r.jsx)(p.JO,{name:"asset"}),label:"Assets",path:(0,O.$U)(n,"/assets"),rightElement:s?(0,r.jsx)(v.V,{icon:"asset_group",children:n1.V.format(s)}):null},{key:"jobs",type:"link",icon:(0,r.jsx)(p.JO,{name:"job"}),label:"Jobs",path:(0,O.$U)(n,"/jobs"),rightElement:l?(0,r.jsx)(v.V,{children:n1.V.format(l)}):null},{key:"sensors",type:"link",icon:(0,r.jsx)(p.JO,{name:"sensors"}),label:"Sensors",path:(0,O.$U)(n,"/sensors"),rightElement:c?(0,r.jsx)(v.V,{children:n1.V.format(c)}):null},{key:"schedules",type:"link",icon:(0,r.jsx)(p.JO,{name:"schedule"}),label:"Schedules",path:(0,O.$U)(n,"/schedules"),rightElement:a?(0,r.jsx)(v.V,{children:n1.V.format(a)}):null},{key:"resources",type:"link",icon:(0,r.jsx)(p.JO,{name:"resource"}),label:"Resources",path:(0,O.$U)(n,"/resources"),rightElement:u?(0,r.jsx)(v.V,{children:n1.V.format(u)}):null},{key:"graphs",type:"link",icon:(0,r.jsx)(p.JO,{name:"graph"}),label:"Graphs",path:(0,O.$U)(n,"/graphs")},{key:"ops",type:"link",icon:(0,r.jsx)(p.JO,{name:"op"}),label:"Ops",path:(0,O.$U)(n,"/ops")}];return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.x,{padding:{bottom:12},children:h.map(e=>(0,r.jsx)(n0.y,{item:e,active:"link"===e.type&&o===e.path},e.key))})})},n4=e=>{let{repoAddress:n,repository:t}=e,{locationEntries:o,loading:s}=(0,a.useContext)(ec.C5);return o.find(e=>e.name===n.location)?(0,r.jsxs)(i.x,{style:{height:"100%",overflow:"hidden"},flex:{direction:"column"},children:[(0,r.jsx)(nM,{repoAddress:n}),(0,r.jsx)(i.x,{padding:{horizontal:24},border:"bottom",children:(0,r.jsx)(nU,{selectedTab:"definitions",repoAddress:n})}),(0,r.jsxs)(i.x,{style:{overflow:"hidden"},flex:{direction:"row",grow:1},children:[(0,r.jsx)(i.x,{style:{flex:"0 0 292px",overflowY:"auto"},padding:{vertical:16,horizontal:12},border:"right",children:(0,r.jsx)(n2,{repoAddress:n,repository:t})}),(0,r.jsx)(i.x,{flex:{direction:"column",alignItems:"stretch"},style:{flex:1,overflow:"hidden"},children:(0,r.jsx)(nK,{repoAddress:n,repository:t})})]})]}):s?(0,r.jsx)("div",{}):(0,r.jsx)(d.l_,{to:"/deployment/locations"})};var n6=t(1747),n3=t(74188),n8=t(20156);let n5=e=>{let{locationName:n}=e;return null};var n9=t(45984);let n7=e=>{let{label:n,border:t=null}=e;return(0,r.jsx)(i.x,{background:T.gJ(),border:t,padding:{horizontal:24,vertical:8},children:(0,r.jsx)(y.pm,{children:n})})};var te=t(35599);let tn="280px",tt=e=>{let{repoAddress:n,locationStatus:t,locationEntry:o}=e,{displayMetadata:s}=o,l=(0,a.useMemo)(()=>({image:s.find(e=>{let{key:n}=e;return"image"===n})||null}),[s]),d=(0,a.useMemo)(()=>n9.Pz(Object.fromEntries(s.map(e=>{let{key:n,value:t}=e;return[n,t]}))),[s]),c=(0,a.useMemo)(()=>{var e;return(null===(e=o.locationOrLoadError)||void 0===e?void 0:e.__typename)==="RepositoryLocation"?o.locationOrLoadError.dagsterLibraryVersions:null},[o]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.x,{padding:{horizontal:24},border:"bottom",children:(0,r.jsx)(nU,{selectedTab:"overview",repoAddress:n})}),(0,r.jsx)(n7,{label:"Details"}),(0,r.jsx)(n6.i,{style:{width:"100%",tableLayout:"fixed"},children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{width:tn,minWidth:tn,verticalAlign:"middle"},children:"Status"}),(0,r.jsx)("td",{children:(0,r.jsx)(nz._y,{locationStatus:t,locationOrError:o})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Updated"}),(0,r.jsx)("td",{children:(0,r.jsx)("div",{style:{whiteSpace:"nowrap"},children:(0,r.jsx)(te.C,{unixTimestamp:t.updateTimestamp})})})]}),l.image?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Image"}),(0,r.jsx)("td",{style:{fontFamily:n3.b.monospace},children:(0,r.jsx)(eF.g,{text:l.image.value})})]}):null]})}),(0,r.jsx)(n5,{locationName:n.location}),(null==c?void 0:c.length)?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n7,{label:"Libraries"}),(0,r.jsx)(n6.i,{children:(0,r.jsx)("tbody",{children:c.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{width:tn},children:(0,r.jsx)(y.fv,{children:e.name})}),(0,r.jsx)("td",{children:(0,r.jsx)(y.fv,{children:e.version})})]},e.name))})})]}):null,(0,r.jsx)(n7,{label:"Metadata",border:"bottom"}),(0,r.jsx)(ti,{}),(0,r.jsx)("div",{style:{height:"320px"},children:(0,r.jsx)(n8.u,{options:{readOnly:!0,lineNumbers:!1},theme:["code-location-metadata"],value:d})})]})};var tr=e=>{let{repoAddress:n}=e,{locationEntries:t,locationStatuses:o,loading:l}=(0,a.useContext)(ec.C5),d=t.find(e=>e.name===n.location),c=o[n.location];return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(nM,{repoAddress:n}),(()=>{if(!d||!c){let e=(0,x.Uz)(n);return l?(0,r.jsx)(i.x,{padding:64,flex:{direction:"row",justifyContent:"center"},children:(0,r.jsx)(s.f,{label:"Loading ".concat(e,"…")})}):(0,r.jsx)(i.x,{padding:64,flex:{direction:"row",justifyContent:"center"},children:(0,r.jsx)(j,{repoAddress:n,locationEntry:d||null})})}return(0,r.jsx)(tt,{repoAddress:n,locationEntry:d,locationStatus:c})})()]})};let ti=(0,U.vJ)([".CodeMirror.cm-s-code-location-metadata.cm-s-code-location-metadata{background-color:",";padding:12px 20px;height:300px;}"],T.v8());var to=t(96011),ts=t(36803);let tl=e=>{let{repoAddress:n}=e,t=(0,d.TH)(),{pipelinePath:i}=(0,d.UO)(),{loading:o}=(0,a.useContext)(ec.C5),{loading:s}=(0,a.useContext)(ts.IT),l=(0,eN.Ux)(n);if((0,eA.j$)("Workspace",o),(0,eA.j$)("Permissions",s),o||s)return null;let{pipelineName:c}=(0,P.p3)(i),p=(0,eN.E8)(l,c),{pathname:u,search:h}=t,x=u.replace("/pipeline_or_job/",p?"/jobs/":"/pipelines/");return(0,r.jsx)(d.l_,{to:"".concat(x).concat(h)})};var ta=t(21473),td=t(46352),tc=t(62233),tp=t(28025),tu=t(1040),th=t(76016);function tx(){let e=(0,g._)(["\n  query ConfigForRunQuery($runId: ID!) {\n    runOrError(runId: $runId) {\n      ... on Run {\n        id\n        mode\n        runConfigYaml\n        solidSelection\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return tx=function(){return e},e}let tm=e=>{let{repoAddress:n}=e,{permissions:{canLaunchPipelineExecution:t},loading:i}=(0,ts.xz)(n.location),{repoPath:o,pipelinePath:s,runId:l}=(0,d.UO)();return((0,eA.j$)("Permissions",i),i)?null:t?(0,r.jsx)(tj,{pipelinePath:s,repoAddress:n,runId:l}):(0,r.jsx)(d.l_,{to:"/locations/".concat(o,"/pipeline_or_job/").concat(s)})},tj=e=>{let{pipelinePath:n,repoAddress:t,runId:i}=e,o=(0,P.p3)(n),{pipelineName:s}=o,l=(0,eN.Ux)(t),a=(0,eN.E8)(l,s);(0,th.b)(o,a);let[c,p]=(0,tu.aC)(t,s),{data:u,loading:h}=(0,b.aM)(tg,{variables:{runId:i},onCompleted:e=>{let n=null==e?void 0:e.runOrError,t=(null==n?void 0:n.__typename)==="Run"?n:null;if(!t)return;let{runConfigYaml:r,mode:i,solidSelection:o}=t;if(!r&&!i&&!o)return;let s={name:"From run ".concat(t.id.slice(0,8))};"string"==typeof r&&(s.runConfigYaml=r),"string"==typeof i&&(s.mode=i);let l=null;o instanceof Array&&o.length>0?l=o:"string"==typeof o&&o&&(l=[o]),s.solidSelection=l,s.solidSelectionQuery=l?l.join(","):"*",p(e=>(0,tu.f0)(e,s))}}),x=null==u?void 0:u.runOrError;return h?(0,r.jsx)(tp.m,{}):x&&"RunNotFoundError"!==x.__typename?"PythonError"===x.__typename?(0,r.jsx)(tc.U,{icon:"error",title:"Python error",description:x.message}):(0,r.jsx)(d.l_,{to:{pathname:(0,O.$U)(t,"/".concat(a?"jobs":"pipelines","/").concat(s,"/playground"))}}):(0,r.jsx)(tc.U,{icon:"error",title:"No run found",description:"The run with this ID does not exist or has been cleaned up."})},tg=(0,b.Ps)(tx(),S.B),tf=e=>{let{repoAddress:n}=e,{permissions:{canLaunchPipelineExecution:t},loading:i}=(0,ts.xz)(n.location);(0,eA.j$)("Permissions",i);let{repoPath:o,pipelinePath:s}=(0,d.UO)();return i?null:t?(0,r.jsx)(ty,{pipelinePath:s,repoAddress:n}):(0,r.jsx)(d.l_,{to:"/locations/".concat(o,"/pipeline_or_job/").concat(s)})},ty=e=>{let{pipelinePath:n,repoAddress:t}=e,i=(0,P.p3)(n),{pipelineName:o}=i,s=(0,eN.Ux)(t),l=(0,eN.E8)(s,o);(0,th.b)(i,l);let[c,p]=(0,tu.aC)(t,o),u=eT().parse(window.location.search,{ignoreQueryPrefix:!0});return(0,a.useEffect)(()=>{if(u.config||u.mode||u.solidSelection||u.tags||u.assetSelection){let e={};"string"==typeof u.config&&(e.runConfigYaml=u.config),"string"==typeof u.mode&&(e.mode=u.mode),u.solidSelection instanceof Array&&u.solidSelection.length>0?e.solidSelection=u.solidSelection:"string"==typeof u.solidSelection&&u.solidSelection&&(e.solidSelection=[u.solidSelection]),"string"==typeof u.solidSelectionQuery&&(e.solidSelectionQuery=u.solidSelectionQuery),Array.isArray(u.tags)&&(e.tags=u.tags),Array.isArray(u.assetSelection)&&(e.assetSelection=u.assetSelection),p(n=>(0,tu.f0)(n,e))}}),(0,r.jsx)(d.l_,{to:{pathname:(0,O.$U)(t,"/".concat(l?"jobs":"pipelines","/").concat(o,"/playground"))}})};var tv=t(89891),tb=t(92506),tS=t(75652),tw=t.n(tS),tC=t(90441),tN=t(88257),tA=t(54516),tE=t(43984),tP=t(68283),tk=t(33182),tO=t(86269);function t_(){let e=(0,g._)(["\n  query LatestRunTagQuery($runsFilter: RunsFilter) {\n    pipelineRunsOrError(filter: $runsFilter, limit: 1) {\n      ... on Runs {\n        results {\n          id\n          status\n          ...RunTimeFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return t_=function(){return e},e}let tR={showSeconds:!0,showTimezone:!1},t$=e=>{let{pipelineName:n,repoAddress:t}=e,o=(0,b.aM)(tF,{variables:{runsFilter:{pipelineName:n,tags:[{key:tE.H.RepositoryLabelTag,value:(0,x.Wg)(t)}]}},notifyOnNetworkStatusChange:!0});(0,es.C4)(o,es.dT);let s=(0,a.useMemo)(()=>{var e;let n=null===(e=o.data)||void 0===e?void 0:e.pipelineRunsOrError;return n&&"Runs"===n.__typename&&n.results[0]||null},[o]);if(!s)return null;let l={start:s.startTime,end:s.endTime,status:s.status};return(0,r.jsx)(v.V,{intent:(()=>{switch(s.status){case tN.VOA.SUCCESS:return"success";case tN.VOA.CANCELED:case tN.VOA.CANCELING:case tN.VOA.FAILURE:return"danger";default:return"none"}})(),children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:4},children:[(0,r.jsx)(tA.K9,{status:s.status,size:10}),"Latest run:",l?(0,r.jsx)(e6.u,{placement:"bottom",content:(0,r.jsx)(tC.k6,{children:(0,r.jsxs)("tbody",{children:[(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{color:T.Aw()},children:(0,r.jsx)(i.x,{padding:{right:16},children:"Started"})}),(0,r.jsx)("td",{children:l.start?(0,r.jsx)(tO.v,{timestamp:l.start,timeFormat:tR}):(0,tP.Z0)(l.status)})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{color:T.Aw()},children:"Ended"}),(0,r.jsx)("td",{children:l.end?(0,r.jsx)(tO.v,{timestamp:l.end,timeFormat:tR}):(0,tP.Z0)(l.status)})]})]})}),children:(0,r.jsx)(u.rU,{to:"/runs/".concat(s.id),children:(0,r.jsx)(tk.Zr,{run:s})})}):null]})})},tF=(0,b.Ps)(t_(),tk.$X);var tI=t(74283),tT=t(4219),tz=t(60918);function tM(){let e=(0,g._)(["\n  query JobMetadataQuery($params: PipelineSelector!, $runsFilter: RunsFilter!) {\n    pipelineOrError(params: $params) {\n      ... on Pipeline {\n        id\n        ...JobMetadataFragment\n      }\n    }\n    assetNodes(pipeline: $params) {\n      id\n      ...JobMetadataAssetNode\n    }\n    pipelineRunsOrError(filter: $runsFilter, limit: 5) {\n      ... on PipelineRuns {\n        results {\n          id\n          ...RunMetadataFragment\n        }\n      }\n    }\n  }\n\n  fragment JobMetadataAssetNode on AssetNode {\n    id\n    autoMaterializePolicy {\n      __typename\n    }\n    assetKey {\n      path\n    }\n  }\n\n  fragment JobMetadataFragment on Pipeline {\n    id\n    isJob\n    name\n    schedules {\n      id\n      mode\n      ...ScheduleSwitchFragment\n    }\n    sensors {\n      id\n      targets {\n        pipelineName\n        mode\n      }\n      ...SensorSwitchFragment\n    }\n  }\n\n  fragment RunMetadataFragment on PipelineRun {\n    id\n    status\n    assets {\n      id\n      key {\n        path\n      }\n    }\n    ...RunTimeFragment\n  }\n\n  ","\n  ","\n  ","\n"]);return tM=function(){return e},e}let tU=e=>{let{pipelineName:n,repoAddress:t}=e,i=function(e,n){let t=(0,b.aM)(tV,{variables:{runsFilter:{pipelineName:n,tags:[{key:tE.H.RepositoryLabelTag,value:(0,x.Wg)(e)}]},params:{pipelineName:n,repositoryName:e.name,repositoryLocationName:e.location}}}).data;return(0,a.useMemo)(()=>({assetNodes:(null==t?void 0:t.assetNodes)||null,job:(null==t?void 0:t.pipelineOrError)&&"Pipeline"===t.pipelineOrError.__typename?t.pipelineOrError:null,runsForAssetScan:(null==t?void 0:t.pipelineRunsOrError)&&"Runs"===t.pipelineRunsOrError.__typename?t.pipelineRunsOrError.results:[]}),[t])}(t,n);return(0,r.jsxs)(r.Fragment,{children:[i.job?(0,r.jsx)(tL,{job:i.job,repoAddress:t}):null,(0,r.jsx)(t$,{pipelineName:n,repoAddress:t}),i.assetNodes&&i.assetNodes.some(e=>!!e.autoMaterializePolicy)&&(0,r.jsx)(nA,{}),i.runsForAssetScan?(0,r.jsx)(tD,{relatedAssets:i.assetNodes?i.assetNodes.map(e=>(0,V.Je)(e.assetKey)):tw()(i.runsForAssetScan.flatMap(e=>e.assets.map(e=>(0,V.Je)(e.key))))}):null]})},tL=e=>{let{job:n,repoAddress:t}=e,i=(0,a.useMemo)(()=>(null==n?void 0:n.__typename)==="Pipeline"&&n.schedules.length?n.schedules:[],[n]),o=(0,a.useMemo)(()=>(null==n?void 0:n.__typename)==="Pipeline"&&n.sensors.length?n.sensors:[],[n]);return(0,r.jsx)(tI.I,{schedules:i,sensors:o,repoAddress:t})},tD=e=>{let{relatedAssets:n}=e,[t,o]=(0,a.useState)(!1);if(0===n.length)return null;if(1===n.length){let e=n[0];return(0,r.jsxs)(v.V,{icon:"asset",children:["Asset: ",(0,r.jsx)(u.rU,{to:"/assets/".concat(e),children:e})]})}return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(v.V,{icon:"asset",children:(0,r.jsx)(tv.Z,{color:T.Es(),onClick:()=>o(!0),children:"View ".concat(n.length," assets")})}),(0,r.jsxs)(tb.Vq,{title:"Related assets",canOutsideClickClose:!0,canEscapeKeyClose:!0,isOpen:t,onClose:()=>o(!1),style:{maxWidth:"80%",minWidth:"500px",width:"auto"},children:[n.map((e,t)=>(0,r.jsx)(i.x,{padding:{vertical:12,horizontal:20},border:t<n.length-1?"bottom":null,children:(0,r.jsx)(u.rU,{to:"/assets/".concat(e),style:{wordBreak:"break-word"},children:e},e)},e)),(0,r.jsx)(tb.cN,{topBorder:!0,children:(0,r.jsx)(c.zx,{intent:"primary",onClick:()=>o(!1),children:"OK"})})]})]})},tV=(0,b.Ps)(tM(),tT.J,tz.U,tk.$X);var tJ=t(1790);let tB=e=>{let{repoAddress:n}=e,t=(0,ts.xz)(n.location),{tabBuilder:o}=(0,a.useContext)(to.v),s=(0,d.$B)(["/locations/:repoPath/pipelines/:selector/:tab?","/locations/:repoPath/jobs/:selector/:tab?","/locations/:repoPath/pipeline_or_job/:selector/:tab?"]),l=(0,P.p3)(s.params.selector),{pipelineName:c,snapshotId:p}=l,h=(0,eN.Ux)(n),x=null==h?void 0:h.repository.pipelines.find(e=>e.name===c),m=!!(null==x?void 0:x.isJob),j=o({hasLaunchpad:!(null==x?void 0:x.isAssetJob),hasPartitionSet:((null==h?void 0:h.repository.partitionSets)||[]).some(e=>e.pipelineName===c)});return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(f.m,{title:(0,r.jsxs)(y.X6,{style:{display:"flex",flexDirection:"row",gap:4},children:[(0,r.jsx)(u.rU,{to:"/jobs",children:"Jobs"}),(0,r.jsx)("span",{children:"/"}),c]}),tags:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:8,wrap:"wrap"},children:[(0,r.jsxs)(v.V,{icon:"job",children:[m?"Job in ":"Pipeline in ",(0,r.jsx)(N.b,{repoAddress:n})]}),p?null:(0,r.jsx)(tU,{pipelineName:c,repoAddress:n})]}),tabs:(0,r.jsx)(tJ.IJ,{repoAddress:n,isJob:m,explorerPath:l,permissions:t,matchingTab:s.params.tab,tabs:j})})})};var tH=t(60129),tq=t(80122),tG=t(90731);function tQ(){let e=(0,g._)(["\n  query JobBackfillsQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n    $cursor: String\n    $limit: Int\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        pipelineName\n        backfills(cursor: $cursor, limit: $limit) {\n          id\n          ...BackfillTableFragment\n        }\n      }\n    }\n  }\n\n  ","\n"]);return tQ=function(){return e},e}let tK=e=>{let{partitionSetName:n,partitionNames:t,repositorySelector:s,refetchCounter:l}=e,[d,c]=(0,a.useState)(()=>[]),[p,u]=(0,a.useState)(),h=(0,b.aM)(tW,{variables:{partitionSetName:n,repositorySelector:s,cursor:p,limit:10}}),x=h.refetch;return(0,a.useEffect)(()=>{l&&x()},[x,l]),(0,r.jsx)(k.g,{queryResult:h,children:e=>{let{partitionSetOrError:n}=e;if("PartitionSetNotFoundError"===n.__typename)return(0,r.jsx)(i.x,{margin:{vertical:20},children:(0,r.jsx)(o.t,{title:"Partition set not found.",icon:"no-results"})});if("PythonError"===n.__typename)return(0,r.jsx)(i.x,{margin:{vertical:20},children:(0,r.jsx)(o.t,{title:"An error occurred.",icon:"no-results"})});let{backfills:s,pipelineName:l}=n;if(!s.length)return(0,r.jsx)(i.x,{margin:{vertical:20},children:(0,r.jsx)(o.t,{title:"No backfills for ".concat(l),icon:"no-results"})});let a={hasPrevCursor:!!p,hasNextCursor:s&&10===s.length,popCursor:()=>{let e=[...d];u(e.pop()),c(e)},advanceCursor:()=>{p&&c(e=>[...e,p]);let e=s&&s[s.length-1].id;e&&u(e)},reset:()=>{c([]),u(void 0)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tG.G,{backfills:s,refetch:x,showBackfillTarget:!1,allPartitions:t}),(0,r.jsx)(tq.b$,{...a})]})}})},tW=(0,b.Ps)(tQ(),tG.b);var tZ=t(37504),tY=t(54048),tX=t(90086),t0=t(67994),t1=t(77851);let t2=e=>{let{counts:n,value:t,onChange:o,allowed:s,disabled:l}=e;return(0,r.jsx)(i.x,{flex:{direction:"row",alignItems:"center",gap:12},style:{overflow:"hidden"},children:s.map(e=>(0,r.jsx)(tZ.X,{"data-testid":(0,t1.N)("run-status-".concat(e,"-checkbox")),disabled:l,style:{marginBottom:0,marginLeft:10,minWidth:200},checked:t.includes(e)&&!l,label:"".concat((0,t0.fi)(e)," (").concat(n[e],")"),onChange:()=>o(t.includes(e)?t.filter(n=>n!==e):[...t,e])},e))})};var t4=t(98832),t6=t(97803),t3=t(13549),t8=t(77432),t5=t(57755),t9=t(97145),t7=t(45546),re=t(59867);function rn(){let e=(0,g._)(["\n  query BackfillSelectorQuery($pipelineSelector: PipelineSelector!) {\n    pipelineSnapshotOrError(activePipelineSelector: $pipelineSelector) {\n      ... on PipelineSnapshot {\n        id\n        name\n        solidHandles {\n          handleID\n          solid {\n            name\n            definition {\n              name\n            }\n            inputs {\n              dependsOn {\n                solid {\n                  name\n                }\n              }\n            }\n            outputs {\n              dependedBy {\n                solid {\n                  name\n                }\n              }\n            }\n          }\n          ...GraphExplorerSolidHandleFragment\n        }\n      }\n    }\n    instance {\n      id\n      ...UsingDefaultLauncherAlertInstanceFragment\n      ...DaemonNotRunningAlertInstanceFragment\n    }\n  }\n\n  ","\n  ","\n  ","\n"]);return rn=function(){return e},e}let rt=e=>{let{partitionSetName:n,onLaunch:t,onCancel:s,onSubmit:l,repoAddress:u,runStatusData:h,refreshing:x,pipelineName:m,partitionNames:j}=e,g=(0,d.k6)(),[f,v]=a.useState(Object.keys(h).filter(e=>!h[e]||h[e]===tN.VOA.FAILURE)),[S,w]=a.useState([tN.VOA.NOT_STARTED,tN.VOA.FAILURE]),C=a.useMemo(()=>f.filter(e=>S.includes(h[e])),[f,S,h]),[N,E]=a.useState(!1),[P,k]=a.useState([]),[O,_]=a.useState(""),[R,$]=a.useState({reexecute:!1,fromFailure:!1}),F=(0,eo.$)(u),{data:z}=(0,b.aM)(ri,{variables:{pipelineSelector:{...F,pipelineName:m}},fetchPolicy:"network-only"}),M=a.useRef(!0);if(a.useEffect(()=>(M.current=!0,()=>{M.current=!1}),[t]),!z)return(0,r.jsx)(i.x,{margin:{vertical:32},flex:{justifyContent:"center"},children:(0,r.jsx)(I.$,{purpose:"section"})});if("PipelineSnapshot"!==z.pipelineSnapshotOrError.__typename)return(0,r.jsx)(i.x,{margin:20,children:(0,r.jsx)(o.t,{icon:"error",title:"Could not fetch job details"})});let{pipelineSnapshotOrError:U,instance:L}=z,D=(0,A.i)(U.solidHandles).map(e=>e.solid),V=(0,t4.V)(D,O),J=(0,t8.tc)({nodes:V.all,mode:t3.hS.FLAT}).boxes.map(e=>({x:e.x,name:e.node.name})),B=e=>h[e]===tN.VOA.FAILURE,H=j.filter(B),q=function(e){let n={[tN.VOA.SUCCESS]:0,[tN.VOA.NOT_STARTED]:0,[tN.VOA.FAILURE]:0,[tN.VOA.QUEUED]:0,[tN.VOA.STARTED]:0};for(let t of e)n[t.state]=(n[t.state]||0)+1;return n}(f.map(e=>({partitionKey:e,state:h[e]})));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tb.a7,{children:(0,r.jsxs)(i.x,{flex:{direction:"column",gap:24},children:[(0,r.jsxs)(ro,{title:(0,r.jsxs)(i.x,{flex:{justifyContent:"space-between"},children:[(0,r.jsx)("div",{children:"Partitions"}),x&&(0,r.jsxs)(i.x,{flex:{gap:4,alignItems:"center"},children:[(0,r.jsx)(I.$,{purpose:"body-text"}),(0,r.jsx)(y.pN,{color:T.$(),children:"Refreshing..."})]})]}),children:[(0,r.jsx)(i.x,{children:"Select partitions to materialize. Click and drag to select a range on the timeline."}),(0,r.jsx)(tX.x,{selected:f,setSelected:e=>{let n=new Set(e);v(j.filter(e=>n.has(e))),R.fromFailure&&e.filter(e=>!B(e)).length>0&&$({...R,fromFailure:!1})},health:{runStatusForPartitionKey:e=>h[e]},partitionKeys:j,dimensionType:(0,t6.vH)(j[0])?tN.iVC.TIME_WINDOW:tN.iVC.STATIC}),(0,r.jsx)(t2,{value:S,onChange:w,counts:q,allowed:R.fromFailure?[tN.VOA.FAILURE]:[tN.VOA.NOT_STARTED,tN.VOA.FAILURE,tN.VOA.QUEUED,tN.VOA.STARTED,tN.VOA.SUCCESS]})]}),H.length?(0,r.jsx)(ro,{title:"Reexecution",children:(0,r.jsx)(tZ.X,{checked:R.fromFailure,disabled:!C.every(B),onChange:()=>{let e={...R,fromFailure:!R.fromFailure,reexecute:!R.reexecute};e.fromFailure&&w([tN.VOA.FAILURE]),_(""),$(e)},label:(0,r.jsxs)(i.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,r.jsx)(i.x,{margin:{right:4},children:"Re-execute from failures"}),(0,r.jsx)(e6.u,{placement:"top",content:"For each partition, if the most recent run failed, launch a re-execution starting from the steps that failed. Only applies for selections of failed partitions.",children:(0,r.jsx)(p.JO,{name:"info",color:T.md()})})]})})}):null,(0,r.jsx)(ro,{title:(0,r.jsxs)(i.x,{flex:{display:"inline-flex",alignItems:"center"},children:[(0,r.jsx)(i.x,{margin:{right:4},children:"Step subset"}),(0,r.jsx)(e6.u,{placement:"top",content:"Applies a step-selection to each run for the requested partitions.",children:(0,r.jsx)(p.JO,{name:"info",color:T.md()})})]}),children:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:12},children:[(0,r.jsx)(re.j,{disabled:R.fromFailure,width:520,items:D,value:O,placeholder:"Type a step subset",onChange:_,autoApplyChanges:!0}),O?(0,r.jsxs)("div",{style:{color:T.$()},children:[J.length," step",1===J.length?"":"s"," selected"]}):null]})}),(0,r.jsxs)(ro,{title:"Tags",children:[(0,r.jsx)(t7.U,{tagsFromSession:P,onChange:k,open:N,onRequestClose:()=>E(!1)}),P.length?(0,r.jsx)("div",{style:{border:"1px solid ".concat(T.im()),borderRadius:8,padding:3},children:(0,r.jsx)(t7.x,{tagsFromSession:P,onRequestEdit:()=>E(!0)})}):(0,r.jsx)("div",{children:(0,r.jsx)(c.zx,{onClick:()=>E(!0),children:"Add tags to backfill runs"})})]}),(0,r.jsxs)(i.x,{flex:{direction:"column",gap:16},children:[(0,tY.Rb)(L)?null:(0,r.jsx)(tY.So,{}),(0,r.jsx)(tY.d,{instance:L})]})]})}),(0,r.jsxs)(tb.cN,{children:[(0,r.jsx)(c.zx,{intent:"none",onClick:s,children:"Cancel"}),(0,r.jsx)(rr,{partitionNames:C,partitionSetName:n,reexecutionSteps:!R.fromFailure&&V.all.length<D.length?J.map(e=>e.name):void 0,fromFailure:R.fromFailure,tags:P,onSubmit:l,onSuccess:e=>{(0,tY.Xd)(g,e,!1),null==t||t(e,O)},onError:e=>{(0,tY.mv)(e)},repoAddress:u})]})]})},rr=e=>{let{partitionSetName:n,partitionNames:t,reexecutionSteps:i,fromFailure:o,tags:s,onSuccess:l,onError:d,onSubmit:c,repoAddress:p}=e,u=(0,eo.$)(p),h=a.useRef(!0),[x,{loading:m}]=(0,b.Db)(t5.f);a.useEffect(()=>(h.current=!0,()=>{h.current=!1}),[l]);let j=async()=>{c();let{data:e}=await x({variables:{backfillParams:{selector:{partitionSetName:n,repositorySelector:u},partitionNames:t,reexecutionSteps:i,fromFailure:o,tags:s}}});h.current&&(e&&"LaunchBackfillSuccess"===e.launchPartitionBackfill.__typename?null==l||l(e.launchPartitionBackfill.backfillId,!1):null==d||d(e))},g=t.length,f=null==i?void 0:i.length,y=[m?"Submitting ".concat(g," ").concat(1===g?"run":"runs","…"):g?"Submit ".concat(g," ").concat(1===g?"run":"runs"):"Select partitions to submit",!m&&f?"(".concat(f," selected ").concat(1===f?"step":"steps",")"):""].join(" ");return(0,r.jsx)(t9.C,{runCount:g,config:{title:y,icon:"open_in_new",disabled:!g||m,onClick:j}})},ri=(0,b.Ps)(rn(),E.Q,tY.op,tY.EC),ro=e=>{let{title:n,children:t}=e;return(0,r.jsxs)(i.x,{flex:{direction:"column",gap:4},children:[(0,r.jsx)(y.pm,{children:n}),(0,r.jsx)(i.x,{flex:{direction:"column",gap:8},padding:{top:16},border:"top",children:t})]})};var rs=t(343),rl=t(97350);let ra=a.memo(e=>{let{partitionNames:n,jobDataByPartition:t,stepDataByPartition:s,title:l,yLabel:d,isJob:p,hiddenStepKeys:u}=e,[h,x]=(0,a.useState)(()=>({})),m=(0,a.useRef)(null),j=(0,rl.R)(),[g,f]=(0,a.useState)(n.length>1e3),y=g&&n.length>1e3,v=(0,a.useCallback)(e=>{let n=m.current;if(!n)return;let t=n.scales["x-axis-0"];if(!t)return;let{offsetX:r,offsetY:i}=e;if(!("click"===e.type&&r<=n.chartArea.right&&r>=n.chartArea.left&&i<=n.chartArea.bottom&&i>=n.chartArea.top)||!e.shiftKey)return;let o=t.getValueForPixel(r),s=n.data.labels[o];x(e=>({...e,[s]:!e[s]}))},[]),b=(0,a.useMemo)(()=>y?null:{title:l?{display:!0,text:l}:void 0,animation:!1,scales:d?{y:{id:"y",title:{display:!0,text:d,color:j[T.Aw()]},grid:{color:j[T.wL()]},ticks:{color:j[T.Aw()],font:{size:12,family:n3.b.monospace}}},x:{id:"x",title:{display:!0,text:l,color:j[T.Aw()]},grid:{color:j[T.wL()]},ticks:{color:j[T.Aw()],font:{size:12,family:n3.b.monospace}}}}:void 0,plugins:{legend:{display:!1,onClick:(e,n)=>{}}},onClick:v,maintainAspectRatio:!1},[v,j,y,l,d]),{jobData:S,stepData:w}=(0,a.useMemo)(()=>{if(y)return{jobData:[],stepData:{}};let e=[],r={};return n.forEach(n=>{let i=!!h[n];t&&e.push({x:n,y:i?void 0:t[n]}),s&&Object.entries(s[n]||{}).forEach(e=>{let[t,o]=e;(null==u||!u.includes(t))&&o&&(r[t]=[...r[t]||[],{x:n,y:i?void 0:o}])})}),Object.keys(r).forEach(e=>{r[e]=rd(n,r[e])}),{jobData:e,stepData:r}},[h,u,t,n,y,s]),C=p?"Total job":"Total pipeline",N=(0,a.useMemo)(()=>y?null:{labels:n,datasets:[...!t||u&&u.includes(C)?[]:[{label:C,data:S,borderColor:j[T.im()],backgroundColor:j[T.M()]}],...Object.keys(w).map(e=>({label:e,data:w[e],borderColor:(0,D.kU)(e),backgroundColor:j[T.M()]}))]},[C,u,S,t,n,j,y,w]);return N&&b?(0,r.jsx)(rc,{children:(0,r.jsx)(rs.x1,{data:()=>N,height:300,options:b,ref:m})}):(0,r.jsx)(o.t,{icon:"warning",title:"Large number of data points",description:(0,r.jsxs)(i.x,{flex:{direction:"column",gap:8},children:["There are ",n1.V.format(n.length)," datapoints in this graph. This might crash the browser.",(0,r.jsx)("div",{children:(0,r.jsx)(c.zx,{intent:"primary",onClick:()=>{f(!1)},children:"Show anyway"})})]})})}),rd=(e,n)=>{let t={};return n.forEach(e=>{t[e.x]=e.y}),e.map(e=>({x:e,y:t[e]}))},rc=U.ZP.div.withConfig({componentId:"sc-9b085522-0"})(["display:flex;color:",";padding:24px 12px;text-decoration:none;"],T.$());var rp=t(32996),ru=t(71291),rh=t(95590),rx=t(9875);function rm(){let e=(0,g._)(["\n  query PartitionsStatusQuery(\n    $partitionSetName: String!\n    $repositorySelector: RepositorySelector!\n  ) {\n    partitionSetOrError(\n      repositorySelector: $repositorySelector\n      partitionSetName: $partitionSetName\n    ) {\n      ... on PartitionSet {\n        id\n        ...OpJobPartitionSet\n      }\n      ... on PartitionSetNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment OpJobPartitionSet on PartitionSet {\n    id\n    name\n    pipelineName\n    partitionsOrError {\n      ... on Partitions {\n        results {\n          name\n        }\n      }\n      ...PythonErrorFragment\n    }\n    partitionStatusesOrError {\n      ... on PartitionStatuses {\n        results {\n          id\n          ...OpJobPartitionStatus\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  fragment OpJobPartitionStatus on PartitionStatus {\n    id\n    partitionName\n    runStatus\n    runDuration\n  }\n\n  ","\n"]);return rm=function(){return e},e}let rj=new Map,rg=a.memo(e=>{let{partitionSetName:n,repoAddress:t}=e,s=(0,eo.$)(t),l=(0,a.useMemo)(()=>({partitionSetName:n,repositorySelector:s}),[n,s]),d=(0,a.useMemo)(()=>JSON.stringify(l),[l]),c=(0,a.useMemo)(()=>rj.get(d),[d]),p=(0,b.aM)(rb,{variables:{partitionSetName:n,repositorySelector:s},notifyOnNetworkStatusChange:!0,fetchPolicy:"no-cache"});(0,a.useLayoutEffect)(()=>{p&&rj.set(d,p)},[d,p]);let{data:u,loading:h}=p.data?p:null!=c?c:p;if(!u)return h?(0,r.jsx)(i.x,{padding:32,flex:{direction:"column",alignItems:"center"},children:(0,r.jsxs)(i.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(I.$,{purpose:"body-text"}),(0,r.jsx)("div",{children:"Loading partitions…"})]})}):(0,r.jsx)(i.x,{padding:32,children:(0,r.jsx)(o.t,{icon:"error",title:"An error occurred",description:"An unexpected error occurred."})});let{partitionSetOrError:x}=u;if("PartitionSetNotFoundError"===x.__typename)return(0,r.jsx)(i.x,{padding:32,children:(0,r.jsx)(o.t,{icon:"search",title:"Partition set not found",description:x.message})});if("PythonError"===x.__typename)return(0,r.jsx)(i.x,{padding:32,children:(0,r.jsx)(nq.T9,{error:x})});if("PythonError"===x.partitionsOrError.__typename)return(0,r.jsx)(i.x,{padding:32,children:(0,r.jsx)(nq.T9,{error:x.partitionsOrError})});let m=x.partitionsOrError.results.map(e=>{let{name:n}=e;return n});return(0,r.jsx)(ry,{partitionNames:m,partitionSet:x,repoAddress:t,partitionsQueryResult:p})});function rf(e){return(0,a.useMemo)(()=>{let n={},t={};return e.forEach(e=>{if(!e.runsLoaded||0===e.runs.length)return;let r=e.runs.sort((e,n)=>e.startTime||0-(n.startTime||0)),i=r[r.length-1];n[e.name]={},t[e.name]=(null==i?void 0:i.endTime)&&(null==i?void 0:i.startTime)?i.endTime-i.startTime:void 0,i.stepStats.forEach(t=>{n[e.name][t.stepKey]=[t.endTime&&t.startTime?t.endTime-t.startTime:void 0]})}),{runDurationData:t,stepDurationData:n}},[e])}let ry=a.memo(e=>{let{partitionSet:n,partitionNames:t,repoAddress:o,partitionsQueryResult:s}=e,{permissions:{canLaunchPartitionBackfill:l},disabledReasons:d}=(0,ts.xz)(o.location),{viewport:u,containerProps:h}=(0,tH.S)(),[x,m]=(0,a.useState)(60),[j,g]=(0,a.useState)(0),[f,v]=(0,a.useState)(!1),[b,S]=(0,a.useState)(!1),[w,C]=(0,a.useState)(!1),N=(0,eo.$)(o),[A,E]=(0,a.useState)(0),P=(0,rx.T)({partitionSetName:n.name,partitionTagName:tE.H.Partition,partitionNames:t,pageSize:x,runsFilter:[],repositorySelector:N,jobName:n.pipelineName,offset:j,skipQuery:!f});(0,a.useEffect)(()=>{u.width&&!f&&m((0,ru.Rc)(u.width-rh.AQ))},[u.width,f,m]);let k=(0,a.useMemo)(()=>f?t.slice(Math.max(0,t.length-1-j-x),t.length-j):t,[j,x,t,f]),O=rf(P).stepDurationData,_=(0,a.useCallback)(()=>C(!0),[]),R=(0,a.useMemo)(()=>new Set(k),[k]),{partitionStatusesOrError:$}=n,F=(0,a.useMemo)(()=>"PartitionStatuses"===$.__typename?$.results:[],[$]),{runStatusData:I,runDurationData:T}=(0,a.useMemo)(()=>{let e={},n={};return F.forEach(t=>{e[t.partitionName]=t.runStatus||tN.VOA.NOT_STARTED,R.has(t.partitionName)&&(n[t.partitionName]=t.runDuration||void 0)}),{runStatusData:e,runDurationData:n}},[F,R]),z=(0,a.useMemo)(()=>({runStatusForPartitionKey:e=>I[e]}),[I]);return(0,r.jsxs)("div",{children:[(0,r.jsx)(tb.Vq,{canEscapeKeyClose:!w,canOutsideClickClose:!w,onClose:()=>S(!1),style:{width:800,zIndex:1e3},title:"Launch ".concat(n.pipelineName," backfill"),isOpen:b,children:b&&(0,r.jsx)(rt,{partitionSetName:n.name,partitionNames:t,runStatusData:I,refreshing:s.loading,pipelineName:n.pipelineName,onCancel:()=>S(!1),onLaunch:(e,n)=>{E(A+1),S(!1)},onSubmit:_,repoAddress:o})}),(0,r.jsxs)(i.x,{flex:{justifyContent:"space-between",direction:"row",alignItems:"center"},border:"bottom",padding:{vertical:16,horizontal:24},children:[(0,r.jsx)(y.pm,{children:"Status"}),(0,r.jsxs)(i.x,{flex:{gap:8},children:[(0,r.jsx)(c.zx,{onClick:()=>v(!f),active:b,children:f?"Hide per-step status":"Show per-step status"}),(0,r.jsx)(c.zx,{onClick:()=>s.refetch(),loading:s.loading,disabled:s.loading,children:"Refresh"}),l?(0,r.jsx)(c.zx,{onClick:()=>{s.refetch(),S(!b)},icon:(0,r.jsx)(p.JO,{name:"add_circle"}),active:b,children:"Launch backfill…"}):(0,r.jsx)(e6.u,{content:d.canLaunchPartitionBackfill,children:(0,r.jsx)(c.zx,{icon:(0,r.jsx)(p.JO,{name:"add_circle"}),disabled:!0,children:"Launch backfill…"})})]})]}),(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center"},border:"bottom",padding:{left:8},children:[(0,r.jsx)(rv,{count:t.length,label:"Total partitions"}),(0,r.jsx)(rv,{count:(0,a.useMemo)(()=>t.filter(e=>I[e]===tN.VOA.FAILURE).length,[t,I]),label:"Failed partitions"}),(0,r.jsx)(rv,{count:(0,a.useMemo)(()=>t.filter(e=>!I[e]||I[e]===tN.VOA.NOT_STARTED).length,[t,I]),label:"Missing partitions"})]}),(0,r.jsxs)(i.x,{padding:{vertical:16,horizontal:24},children:[(0,r.jsx)("div",{...h,children:(0,r.jsx)(rp.b,{partitionNames:t,health:z,selected:f?k:void 0,selectionWindowSize:x,onClick:(0,a.useCallback)(e=>{let n=t.length-1;g(Math.min(n,Math.max(0,n-t.indexOf(e)-.5*x))),f||v(!0)},[x,t,f]),tooltipMessage:"Click to view per-step status"})}),f?(0,r.jsx)(i.x,{margin:{top:16},children:(0,r.jsx)(ru.ux,{partitionNames:t,partitions:P,pipelineName:n.pipelineName,repoAddress:o,setPageSize:m,offset:j,setOffset:g})}):null]}),(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,r.jsx)(y.pm,{children:"Run duration"})}),(0,r.jsx)(i.x,{margin:24,children:(0,r.jsx)(ra,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:f?k:t,jobDataByPartition:T})}),f?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},children:(0,r.jsx)(y.pm,{children:"Step duration"})}),(0,r.jsx)(i.x,{margin:24,children:(0,r.jsx)(ra,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:k,stepDataByPartition:O})})]}):null,(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",style:{marginBottom:-1},children:(0,r.jsx)(y.pm,{children:"Backfill history"})}),(0,r.jsx)(i.x,{margin:{bottom:20},children:(0,r.jsx)(tK,{partitionSetName:n.name,repositorySelector:N,partitionNames:t,refetchCounter:A})})]})}),rv=e=>{let{count:n,label:t}=e;return(0,r.jsxs)(i.x,{padding:16,style:{flex:1},border:"right",children:[(0,r.jsx)("div",{style:{fontSize:18,marginBottom:4},children:(0,r.jsx)("strong",{children:n})}),(0,r.jsx)("div",{children:t})]})},rb=(0,b.Ps)(rm(),S.B);var rS=t(61915),rw=t(17346),rC=t(65470),rN=t(32177),rA=t(65152);let rE=e=>{let{partitionSetName:n,repoAddress:t,pipelineName:o}=e,{viewport:s,containerProps:l}=(0,tH.S)(),d=(0,eo.$)(t),p=(0,rw.uc)("*",{pipelineSelector:{pipelineName:o,repositoryName:t.name,repositoryLocationName:t.location}}),u=(0,rA.mR)(p.graphAssetKeys),{total:h,missing:x,merged:m}=(0,a.useMemo)(()=>{let e=(0,t6.$G)(u.filter(e=>e.dimensions.length>0)),n=e.dimensions.map(e=>({selectedKeys:e.partitionKeys,selectedRanges:[(0,rS.$0)(e)],dimension:e})),t=(0,t6.ju)(n,n=>e.stateForKeyIdx(n).includes(rC.yo.MISSING));return{merged:e,total:(0,rA.xD)(n),missing:t.length}},[u]),[j,g]=(0,a.useState)(60),[f,v]=(0,a.useState)(0),[b,S]=(0,a.useState)(!1);(0,a.useEffect)(()=>{s.width&&g((0,ru.Rc)(s.width-rh.AQ))},[s.width,g]);let w=m.dimensions.findIndex(t6.nv);-1===w&&(w=0);let C=m.dimensions[w]?m.dimensions[w]:null,N=(null==C?void 0:C.partitionKeys)||[],A=N.slice(Math.max(0,N.length-1-f-j),N.length-f);return(0,r.jsxs)("div",{children:[(0,r.jsxs)(i.x,{flex:{justifyContent:"space-between",direction:"row",alignItems:"center"},border:"bottom",padding:{vertical:16,horizontal:24},children:[(0,r.jsx)(y.pm,{children:"Status"}),(0,r.jsxs)(i.x,{flex:{gap:8},children:[(0,r.jsx)(c.zx,{onClick:()=>S(!b),children:b?"Hide per-asset status":"Show per-asset status"}),(0,r.jsx)(rN.XE,{scope:{all:p.graphQueryItems.map(e=>e.node),skipAllTerm:!0},preferredJobName:o})]})]}),(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center"},border:"bottom",padding:{left:8},children:[(0,r.jsx)(rv,{count:h,label:"Total partitions"}),(0,r.jsx)(rv,{count:x,label:"Missing partitions"})]}),(0,r.jsxs)(i.x,{padding:{vertical:16,horizontal:24},children:[(0,r.jsx)("div",{...l,children:(0,r.jsx)(rp.b,{partitionNames:N,splitPartitions:!!C&&!(0,t6.nv)(C),health:{ranges:m.rangesForSingleDimension(w)},selected:A,selectionWindowSize:j,tooltipMessage:"Click to view per-asset status",onClick:e=>{let n=N.length-1;v(Math.min(n,Math.max(0,n-N.indexOf(e)-.5*j)))}})}),b&&C&&(0,r.jsx)(i.x,{margin:{top:16},children:(0,r.jsx)(ru.ac,{rangeDimensionIdx:w,rangeDimension:C,assetHealth:u,assetQueryItems:p.graphQueryItems,pipelineName:o,setPageSize:g,offset:f,setOffset:v})})]}),b&&(0,r.jsx)(rP,{repositorySelector:d,pipelineName:o,partitionSetName:n,multidimensional:((null==m?void 0:m.dimensions.length)||0)>1,dimensionName:C?C.name:null,dimensionKeys:N,selected:A,offset:f,pageSize:j}),(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",style:{marginBottom:-1},children:(0,r.jsx)(y.pm,{children:"Backfill history"})}),(0,r.jsx)(i.x,{margin:{bottom:20},children:(0,r.jsx)(tK,{partitionSetName:n,repositorySelector:d,partitionNames:N,refetchCounter:1})})]})},rP=e=>{let{repositorySelector:n,dimensionKeys:t,dimensionName:o,selected:s,pageSize:l,partitionSetName:a,multidimensional:d,pipelineName:c,offset:p}=e,{stepDurationData:u,runDurationData:h}=rf((0,rx.T)({partitionSetName:a,partitionTagName:d?"".concat(tE.H.Partition,"/").concat(o):tE.H.Partition,partitionNames:t,repositorySelector:n,pageSize:l,runsFilter:[],jobName:c,offset:p,skipQuery:!o}));return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,r.jsx)(y.pm,{children:"Run duration"})}),(0,r.jsx)(i.x,{margin:24,children:(0,r.jsx)(ra,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:s,jobDataByPartition:h})}),(0,r.jsx)(i.x,{padding:{horizontal:24,vertical:16},border:"top-and-bottom",children:(0,r.jsx)(y.pm,{children:"Step durations"})}),(0,r.jsx)(i.x,{margin:24,children:(0,r.jsx)(ra,{isJob:!0,title:"Execution time by partition",yLabel:"Execution time (secs)",partitionNames:s,stepDataByPartition:u})})]})};function rk(){let e=(0,g._)(["\n  query AssetJobPartitionSetsQuery(\n    $pipelineName: String!\n    $repositoryName: String!\n    $repositoryLocationName: String!\n  ) {\n    partitionSetsOrError(\n      pipelineName: $pipelineName\n      repositorySelector: {\n        repositoryName: $repositoryName\n        repositoryLocationName: $repositoryLocationName\n      }\n    ) {\n      ... on PipelineNotFoundError {\n        message\n      }\n      ... on PartitionSets {\n        results {\n          id\n          name\n          mode\n          solidSelection\n        }\n      }\n      ...PythonErrorFragment\n    }\n  }\n\n  ","\n"]);return rk=function(){return e},e}let rO=(0,b.Ps)(rk(),S.B),r_=e=>{let{repoAddress:n}=e,t=(0,d.UO)(),{pipelinePath:s}=t,l=(0,P.p3)(s),{pipelineName:c}=l,p=(0,eN.Ux)(n),u=null==p?void 0:p.repository.pipelines.find(e=>e.name===c),h=!!(null==u?void 0:u.isJob),x=!!(null==u?void 0:u.isAssetJob);(0,th.b)(l,h),(0,P.Bj)(t);let{partitionSet:m,partitionSetError:j}=function(e,n){let{data:t}=(0,b.aM)(rO,{skip:!n,variables:{repositoryLocationName:e.location,repositoryName:e.name,pipelineName:n}});return(0,a.useMemo)(()=>({partitionSet:(null==t?void 0:t.partitionSetsOrError.__typename)==="PartitionSets"?t.partitionSetsOrError.results[0]:void 0,partitionSetError:(null==t?void 0:t.partitionSetsOrError.__typename)==="PipelineNotFoundError"||(null==t?void 0:t.partitionSetsOrError.__typename)==="PythonError"?t.partitionSetsOrError:void 0}),[t])}(n,c);return m||j?j?(0,r.jsx)(i.x,{padding:{vertical:64},children:(0,r.jsx)(o.t,{icon:"error",title:"Partitions",description:j.message})}):m?x?(0,r.jsx)(rE,{pipelineName:c,partitionSetName:m.name,repoAddress:n}):(0,r.jsx)(rg,{partitionSetName:m.name,repoAddress:n}):(0,r.jsx)(i.x,{padding:{vertical:64},children:(0,r.jsx)(o.t,{icon:"error",title:"Partitions",description:(0,r.jsxs)("div",{children:["There are no partition sets defined for ",h?"job":"pipeline"," ",(0,r.jsx)("code",{children:c}),"."]})})}):(0,r.jsx)(k.T,{purpose:"page"})},rR=e=>{let{repoAddress:n}=e,{FallthroughRoute:t}=(0,a.useContext)(to.v);return(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",minWidth:0,width:"100%",height:"100%"},children:[(0,r.jsx)(tB,{repoAddress:n}),(0,r.jsxs)(d.rs,{children:[(0,r.jsx)(ny.A,{path:"/locations/:repoPath/pipeline_or_job/:pipelinePath(/?.*)",children:(0,r.jsx)(tl,{repoAddress:n})}),(0,r.jsx)(ny.A,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground/setup","/locations/:repoPath/jobs/:pipelinePath/playground/setup"],children:(0,r.jsx)(tf,{repoAddress:n})}),(0,r.jsx)(ny.A,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground/setup-from-run/:runId","/locations/:repoPath/jobs/:pipelinePath/playground/setup-from-run/:runId"],children:(0,r.jsx)(tm,{repoAddress:n})}),(0,r.jsx)(ny.A,{path:["/locations/:repoPath/pipelines/:pipelinePath/playground","/locations/:repoPath/jobs/:pipelinePath/playground"],children:(0,r.jsx)(td.H,{repoAddress:n})}),(0,r.jsx)(ny.A,{path:["/locations/:repoPath/pipelines/:pipelinePath/runs/:runId","/locations/:repoPath/jobs/:pipelinePath/runs/:runId"],render:e=>(0,r.jsx)(d.l_,{to:"/runs/".concat(e.match.params.runId)})}),(0,r.jsx)(ny.A,{path:["/locations/:repoPath/pipelines/:pipelinePath/runs","/locations/:repoPath/jobs/:pipelinePath/runs"],children:(0,r.jsx)(ta.G,{repoAddress:n})}),(0,r.jsx)(ny.A,{path:["/locations/:repoPath/pipelines/:pipelinePath/partitions","/locations/:repoPath/jobs/:pipelinePath/partitions"],children:(0,r.jsx)(r_,{repoAddress:n})}),(0,r.jsx)(ny.A,{path:["/locations/:repoPath/pipelines/:pipelinePath/overview","/locations/:repoPath/jobs/:pipelinePath/overview"],render:e=>(0,r.jsx)(d.l_,{to:"/locations/".concat(e.match.url.replace(/\/overview$/i,""))})}),(0,r.jsx)(ny.A,{path:["/locations/:repoPath/pipelines/(/?.*)","/locations/:repoPath/jobs/(/?.*)"],children:(0,r.jsx)(t,{repoAddress:n})})]})]})};var r$=t(15686),rF=t(71662),rI=t(6750),rT=t(34147),rz=t(581);function rM(){let e=(0,g._)(["\n  query SchedulePartitionStatusQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...SchedulePartitionStatusFragment\n      }\n    }\n  }\n\n  fragment SchedulePartitionStatusFragment on Schedule {\n    id\n    mode\n    pipelineName\n    partitionSet {\n      id\n      name\n      partitionStatusesOrError {\n        ... on PartitionStatuses {\n          results {\n            id\n            ...SchedulePartitionStatusResult\n          }\n        }\n      }\n    }\n  }\n\n  fragment SchedulePartitionStatusResult on PartitionStatus {\n    id\n    partitionName\n    runStatus\n  }\n"]);return rM=function(){return e},e}let rU=["Succeeded","Failed","Missing","Pending"],rL=e=>{switch(e.runStatus){case null:return"Missing";case tN.VOA.SUCCESS:return"Succeeded";case tN.VOA.FAILURE:case tN.VOA.CANCELED:case tN.VOA.CANCELING:return"Failed";case tN.VOA.MANAGED:case tN.VOA.QUEUED:case tN.VOA.NOT_STARTED:case tN.VOA.STARTED:case tN.VOA.STARTING:return"Pending";default:return(0,D.UT)(e.runStatus)}},rD=(0,a.memo)(e=>{let{repoAddress:n,schedule:t}=e,i=(0,eN.Ux)(n),{name:o,partitionSet:s,pipelineName:l}=t,d=null==s?void 0:s.name,c=(0,eN.E8)(i,l),p=(0,a.useMemo)(()=>{let e=d?eT().stringify({partitionSet:d},{addQueryPrefix:!0}):"";return"/".concat(c?"jobs":"pipelines","/").concat(l,"/partitions").concat(e)},[d,c,l]),h=(0,O.$U)(n,p),[x,{data:m,loading:j}]=(0,b.td)(rJ,{variables:{scheduleSelector:{scheduleName:o,repositoryName:n.name,repositoryLocationName:n.location}}}),g=(0,a.useCallback)(()=>x(),[x]);return(0,r.jsxs)(rT.Z,{direction:"column",spacing:4,children:[(0,r.jsx)(u.rU,{to:h,children:d}),(()=>{if(j)return(0,r.jsx)(y.YS,{style:{color:T.$()},children:"Loading…"});if(!m)return(0,r.jsx)(tv.Z,{onClick:g,children:(0,r.jsx)(y.YS,{children:"Show coverage"})});let e=m.scheduleOrError;return"Schedule"===e.__typename?(0,r.jsx)(rV,{schedule:e,partitionURL:h}):(0,r.jsx)(y.YS,{style:{color:T.Yn()},children:"Partition set not found!"})})()]})}),rV=e=>{let{schedule:n,partitionURL:t}=e,{partitionSet:i}=n;if(!i||"PartitionStatuses"!==i.partitionStatusesOrError.__typename)return(0,r.jsx)("span",{style:{color:T.$()},children:"None"});let o=i.partitionStatusesOrError.results,s={};return o.forEach(e=>{let n=rL(e);s[n]=[...s[n]||[],e]}),(0,r.jsx)(rz.Jy,{children:(0,r.jsx)("tbody",{children:rU.map(e=>e in s?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{style:{width:"100px"},children:e}),(0,r.jsx)("td",{children:"Failed"===e||"Missing"===e?(0,r.jsx)(u.rU,{to:"".concat(t,"?showFailuresAndGapsOnly=true"),style:{color:T.Ep()},children:s[e].length}):s[e].length})]},e):null)})})},rJ=(0,b.Ps)(rM());var rB=t(99417);let rH=e=>{let{repoAddress:n,schedule:t}=e,{permissions:{canStartSchedule:i,canStopRunningSchedule:o}}=(0,ts.xz)(n.location),{name:s}=t,l={...(0,eo.$)(n),scheduleName:s},[a,{loading:d}]=(0,b.Db)(rB.E1,{onCompleted:rB.JH}),p=i&&o,u=p?'In code, a default status for "'.concat(s,'" has been set to "').concat(t.defaultStatus,'". Click here to reset the schedule status to track the status set in code.'):ts.Qr;return(0,r.jsx)(e6.u,{content:(0,r.jsx)("div",{style:{maxWidth:"500px",wordBreak:"break-word"},children:u}),display:"flex",children:(0,r.jsx)(c.zx,{disabled:d||!p,onClick:()=>{a({variables:{scheduleSelector:l}})},children:"Reset schedule status"})})};var rq=t(89516),rG=t(24427),rQ=t(55010),rK=t(60603),rW=t(49035),rZ=t(76562),rY=t(68903),rX=t(24608);function r0(){let e=(0,g._)(["\n  query getSchedule(\n    $scheduleSelector: ScheduleSelector!\n    $startTimestamp: Float\n    $ticksAfter: Int\n    $ticksBefore: Int\n  ) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on PythonError {\n        message\n        stack\n      }\n      ... on Schedule {\n        id\n        name\n        potentialTickTimestamps(\n          startTimestamp: $startTimestamp\n          upperLimit: $ticksAfter\n          lowerLimit: $ticksBefore\n        )\n      }\n    }\n  }\n"]);return r0=function(){return e},e}function r1(){let e=(0,g._)(["\n  mutation ScheduleDryRunMutation($selectorData: ScheduleSelector!, $timestamp: Float) {\n    scheduleDryRun(selectorData: $selectorData, timestamp: $timestamp) {\n      ...PythonErrorFragment\n      ... on DryRunInstigationTick {\n        timestamp\n        evaluationResult {\n          runRequests {\n            ...RunRequestFragment\n          }\n          skipReason\n          error {\n            ...PythonErrorFragment\n          }\n        }\n      }\n      ... on ScheduleNotFoundError {\n        scheduleName\n      }\n    }\n  }\n  ","\n  ","\n"]);return r1=function(){return e},e}let r2=navigator.language,r4=e=>(0,r.jsx)(tb.Vq,{...e,style:{width:"70vw",display:"flex"},title:(0,r.jsxs)(i.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[(0,r.jsx)(p.JO,{name:"schedule"}),(0,r.jsx)("span",{children:e.name})]}),children:(0,r.jsx)(r6,{...e})}),r6=e=>{let{repoAddress:n,name:t,onClose:o,jobName:s}=e,[l,d]=(0,a.useState)(),{data:u}=(0,b.aM)(r3,{variables:{scheduleSelector:{repositoryLocationName:n.location,repositoryName:n.name,scheduleName:t}}}),{timezone:[h]}=(0,a.useContext)(rY.JB),[x,m]=(0,a.useState)(!1),j=(0,a.useRef)(null),{viewport:g,containerProps:f}=(0,tH.S)(),[y,v]=(0,a.useState)(!1),S=(0,a.useMemo)(()=>{var e;if(y)return(0,r.jsx)(r8,{repoAddress:n,name:t,timestamp:j.current.ts,jobName:s});if(!u)return(0,r.jsx)(i.x,{padding:{vertical:48},flex:{alignItems:"center",justifyContent:"center"},children:(0,r.jsx)(I.$,{purpose:"page"})});if("PythonError"===u.scheduleOrError.__typename||"ScheduleNotFoundError"===u.scheduleOrError.__typename)return(0,r.jsx)("div",{});let o=u.scheduleOrError.potentialTickTimestamps.map(e=>({ts:e,label:(0,rX.j)({timestamp:{unix:e},locale:r2,timezone:h,timeFormat:{showTimezone:!0}})}));return j.current=l||o[0]||null,(0,r.jsxs)(r9,{children:[(0,r.jsx)(ie,{children:"Select a mock evaluation time"}),(0,r.jsx)(rQ.J,{isOpen:x,position:"bottom-left",fill:!0,content:(0,r.jsx)(rK.v2,{style:{maxHeight:"400px",overflow:"scroll",width:"".concat(g.width,"px")},children:o.map(e=>(0,r.jsx)(rK.sN,{text:(0,r.jsx)("div",{"data-testid":(0,t1.N)("tick-".concat(e.ts)),children:e.label}),onClick:()=>{d(e),m(!1)}},e.ts))}),children:(0,r.jsx)("div",{...f,children:(0,r.jsx)(c.zx,{style:{flex:1},rightIcon:(0,r.jsx)(p.JO,{name:"arrow_drop_down"}),onClick:()=>m(e=>!e),"data-testid":(0,t1.N)("tick-selection"),children:null===(e=j.current)||void 0===e?void 0:e.label})})})]})},[l,f,u,x,s,t,n,y,h,g.width]),w=(0,a.useMemo)(()=>y?(0,r.jsx)(c.zx,{onClick:o,children:"Close"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(c.zx,{onClick:o,children:"Cancel"}),(0,r.jsx)(c.zx,{"data-testid":(0,t1.N)("evaluate"),intent:"primary",onClick:()=>{v(!0)},children:"Evaluate"})]}),[o,y]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(tb.a7,{children:(0,r.jsx)("div",{style:{minHeight:"300px"},children:S})}),w?(0,r.jsx)(tb.cN,{topBorder:!0,children:w}):null]})},r3=(0,b.Ps)(r0()),r8=e=>{var n,t,s,l;let{repoAddress:d,name:c,timestamp:p,jobName:u}=e,{timezone:[h]}=(0,a.useContext)(rY.JB),[x]=(0,b.Db)(r5,(0,a.useMemo)(()=>({variables:{selectorData:{...(0,eo.$)(d),scheduleName:c},timestamp:p}}),[c,d,p])),[m,j]=(0,a.useState)(null);if((0,a.useEffect)(()=>{x().then(e=>{j(()=>e)})},[x]),!m||!m.data)return(0,r.jsx)(i.x,{padding:32,flex:{justifyContent:"center",alignItems:"center"},children:(0,r.jsx)(I.$,{purpose:"page"})});let g=(null==m?void 0:null===(n=m.data)||void 0===n?void 0:n.scheduleDryRun.__typename)==="DryRunInstigationTick"?null==m?void 0:null===(t=m.data)||void 0===t?void 0:t.scheduleDryRun.evaluationResult:null,f=null==g?void 0:null===(s=g.runRequests)||void 0===s?void 0:s.length,S=null==g?void 0:g.error;return(0,r.jsxs)(i.x,{flex:{direction:"column",gap:8},children:[(0,r.jsx)(i.x,{children:(0,r.jsxs)(r7,{children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(y.pm,{children:"Result"}),(0,r.jsx)(i.x,{flex:{grow:1,alignItems:"center"},children:(0,r.jsx)("div",{children:S?(0,r.jsx)(v.V,{intent:"danger",children:"Failed"}):f?(0,r.jsxs)(v.V,{intent:"success",children:[f," run requests"]}):(0,r.jsx)(v.V,{intent:"warning",children:"Skipped"})})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)(y.pm,{children:"Tick"}),(0,r.jsx)(i.x,{flex:{grow:1,alignItems:"center"},children:(0,r.jsx)(y.fv,{children:(0,rX.j)({timestamp:{unix:p},locale:r2,timezone:h,timeFormat:{showTimezone:!0}})})})]})]})}),m.data&&g?g.error?(0,r.jsx)(nq.T9,{error:g.error}):(null===(l=g.runRequests)||void 0===l?void 0:l.length)?(0,r.jsx)(rW.k,{runRequests:g.runRequests,repoAddress:d,isJob:!0,jobName:u,name:c}):(0,r.jsxs)("div",{children:[(0,r.jsx)(y.pm,{children:"Skip Reason"}),(0,r.jsx)("div",{children:(null==g?void 0:g.skipReason)||"No skip reason was output"})]}):(0,r.jsx)(o.t,{title:"An unknown error occurred",description:(0,r.jsxs)("span",{children:["File an issue on"," ",(0,r.jsx)("a",{href:"https://github.com/dagster-io/dagster",target:"_blank",rel:"noreferrer",children:"Github"})," ","if you think this is a bug"]}),icon:"error"})]})},r5=(0,b.Ps)(r1(),S.B,rZ.s),r9=U.ZP.div.withConfig({componentId:"sc-386e26f5-0"})(["button{width:100%;display:flex;justify-content:space-between;}"]),r7=U.ZP.div.withConfig({componentId:"sc-386e26f5-1"})(["display:grid;grid-template-columns:repeat(2,1fr);padding-bottom:12px;border-bottom:1px solid ",";margin-bottom:12px;","{padding-bottom:4px;display:block;}pre{margin:0;}button{margin-top:4px;}"],T.wL(),y.pm),ie=U.ZP.div.withConfig({componentId:"sc-386e26f5-2"})(["padding-bottom:2px;"]);var it=t(58905);let ir={showSeconds:!0,showTimezone:!0},ii=e=>{let{repoAddress:n,schedule:t,refreshState:o,assetSelection:s}=e,{cronSchedule:l,executionTimezone:d,futureTicks:p,name:h,partitionSet:x,pipelineName:m}=t,{scheduleState:j}=t,{status:g,ticks:b}=j,S=b.length>0?b[0]:null,w=g===tN.ynu.RUNNING,[C,A]=(0,a.useState)(!1);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.m,{title:(0,r.jsxs)(y.X6,{style:{display:"flex",flexDirection:"row",gap:4},children:[(0,r.jsx)(u.rU,{to:"/automation",children:"Automation"}),(0,r.jsx)("span",{children:"/"}),h]}),tags:(0,r.jsxs)(v.V,{icon:"schedule",children:["Schedule in ",(0,r.jsx)(N.b,{repoAddress:n})]}),right:(0,r.jsxs)(i.x,{flex:{direction:"row",alignItems:"center",gap:8},children:[(0,r.jsx)(es.xi,{refreshState:o}),(0,r.jsx)(c.zx,{onClick:()=>{A(!0)},children:"Test Schedule"})]})}),(0,r.jsx)(r4,{isOpen:C,onClose:()=>{A(!1)},name:t.name,repoAddress:n,jobName:m},C?"1":"0"),(0,r.jsx)(tC.fJ,{children:(0,r.jsxs)("tbody",{children:[t.description?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Description"}),(0,r.jsx)("td",{children:t.description})]}):null,(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Latest tick"}),(0,r.jsx)("td",{children:S?(0,r.jsxs)(rT.Z,{direction:"row",spacing:8,alignItems:"center",children:[(0,r.jsx)(tO.v,{timestamp:S.timestamp,timezone:d,timeFormat:ir}),(0,r.jsx)(it.a,{tick:S})]}):"Schedule has never run"})]}),p.results[0]&&w&&(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Next tick"}),(0,r.jsx)("td",{children:(0,r.jsx)(tO.v,{timestamp:p.results[0].timestamp,timezone:d,timeFormat:ir})})]}),t.pipelineName||s?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Target"}),(0,r.jsx)(io,{children:(0,r.jsx)(rG.p,{targets:t.pipelineName?[{pipelineName:t.pipelineName}]:null,repoAddress:n,assetSelection:s||null,automationType:"schedule"})})]}):null,(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:(0,r.jsx)(i.x,{flex:{alignItems:"center"},style:{height:"32px"},children:"Running"})}),(0,r.jsx)("td",{children:(0,r.jsxs)(i.x,{flex:{direction:"row",gap:12,alignItems:"center"},style:{height:"32px"},children:[(0,r.jsx)(tT.M,{repoAddress:n,schedule:t}),t.canReset&&(0,r.jsx)(rH,{repoAddress:n,schedule:t})]})})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Partition set"}),(0,r.jsx)("td",{children:x?(0,r.jsx)(rD,{schedule:t,repoAddress:n}):"None"})]}),(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Schedule"}),(0,r.jsx)("td",{children:l?(0,r.jsxs)(rT.Z,{direction:"row",spacing:8,children:[(0,r.jsx)("span",{children:(0,rq.A)(l,d||"UTC")}),(0,r.jsxs)(y.EK,{children:["(",l,")"]})]}):(0,r.jsx)("div",{children:"—"})})]}),d?(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:"Execution timezone"}),(0,r.jsx)("td",{children:d})]}):null]})})]})},io=U.ZP.td.withConfig({componentId:"sc-8514a001-0"})(["button{line-height:20px;}"]);function is(){let e=(0,g._)(["\n  fragment ScheduleFragment on Schedule {\n    id\n    name\n    cronSchedule\n    executionTimezone\n    pipelineName\n    solidSelection\n    mode\n    description\n    partitionSet {\n      id\n      name\n    }\n    defaultStatus\n    canReset\n    scheduleState {\n      id\n      ...InstigationStateFragment\n    }\n    futureTicks(limit: 5) {\n      results {\n        timestamp\n      }\n    }\n  }\n\n  ","\n"]);return is=function(){return e},e}let il=(0,b.Ps)(is(),rz.ai);var ia=t(74050),id=t(40782),ic=t(9790),ip=t(33298),iu=t(30916);function ih(){let e=(0,g._)(['\n  query ScheduleRootQuery($scheduleSelector: ScheduleSelector!) {\n    scheduleOrError(scheduleSelector: $scheduleSelector) {\n      ... on Schedule {\n        id\n        ...ScheduleFragment\n      }\n      ... on ScheduleNotFoundError {\n        message\n      }\n      ...PythonErrorFragment\n    }\n    instance {\n      id\n      daemonHealth {\n        id\n        daemonStatus(daemonType: "SCHEDULER") {\n          id\n          healthy\n        }\n      }\n      ...InstanceHealthFragment\n    }\n  }\n\n  ',"\n  ","\n  ","\n"]);return ih=function(){return e},e}function ix(){let e=(0,g._)(["\n  query PreviousRunsForScheduleQuery($filter: RunsFilter, $limit: Int) {\n    pipelineRunsOrError(filter: $filter, limit: $limit) {\n      ... on Runs {\n        results {\n          id\n          ... on PipelineRun {\n            ...RunTableRunFragment\n          }\n        }\n      }\n      ... on Error {\n        message\n      }\n    }\n  }\n\n  ","\n"]);return ix=function(){return e},e}let im=e=>{var n;(0,w.Px)();let{repoAddress:t}=e,{scheduleName:i}=(0,d.UO)();(0,C.j)("Schedule: ".concat(i));let o={...(0,eo.$)(t),scheduleName:i},[s,l]=a.useState("ticks"),c=(0,b.aM)(ig,{variables:{scheduleSelector:o},notifyOnNetworkStatusChange:!0}),p=(0,b.aM)(rI.d,{variables:{scheduleSelector:o},notifyOnNetworkStatusChange:!0}),u=(0,es.C4)(c,es.dT),h=(0,es.C4)(p,es.dT),x=(0,es.V5)(u,h),m=(0,r.jsxs)(nb.mQ,{selectedTabId:s,onChange:l,children:[(0,r.jsx)(nb.OK,{id:"ticks",title:"Tick history"}),(0,r.jsx)(nb.OK,{id:"runs",title:"Run history"})]}),j=(null===(n=p.data)||void 0===n?void 0:n.scheduleOrError.__typename)==="Schedule"?p.data.scheduleOrError.assetSelection:null;return(0,r.jsx)(k.g,{queryResult:c,allowStaleData:!0,children:e=>{let{scheduleOrError:n,instance:i}=e;if("Schedule"!==n.__typename)return null;let o=!i.daemonHealth.daemonStatus.healthy;return(0,r.jsxs)(nv.T,{children:[(0,r.jsx)(ii,{repoAddress:t,schedule:n,refreshState:x,assetSelection:j}),o?(0,r.jsx)(ia.K,{daemonHealth:i.daemonHealth,padding:{vertical:16,horizontal:24}}):null,"ticks"===s?(0,r.jsx)(ic.H,{tabs:m,repoAddress:t,name:n.name}):(0,r.jsx)(ij,{repoAddress:t,schedule:n,tabs:m})]})}})},ij=e=>{let{repoAddress:n,schedule:t,highlightedIds:i,tabs:s}=e,l=(0,b.aM)(iy,{variables:{limit:20,filter:{tags:[{key:tE.H.ScheduleName,value:t.name},{key:tE.H.RepositoryLabelTag,value:(0,x.Wg)(n)}]}},notifyOnNetworkStatusChange:!0});(0,es.C4)(l,es.dT);let{data:a}=l;if(!a)return null;if("Runs"!==a.pipelineRunsOrError.__typename)return(0,r.jsx)(o.t,{icon:"error",title:"Query Error",description:a.pipelineRunsOrError.message});let d=null==a?void 0:a.pipelineRunsOrError.results;return(0,r.jsx)(ip.A,{actionBarComponents:s,runs:d,highlightedIds:i,hideCreatedBy:!0})},ig=(0,b.Ps)(ih(),il,S.B,id.O),iy=(0,b.Ps)(ix(),iu.Z);var iv=t(6265);let ib=()=>{let{repoPath:e}=(0,d.UO)(),n=(0,a.useContext)(ec.C5),t=(0,ng.g)(e),{flagCodeLocationPage:l}=(0,nf.gV)(),{loading:c}=n;if(!t)return(0,r.jsx)(i.x,{padding:{vertical:64},children:(0,r.jsx)(o.t,{icon:"error",title:"Invalid code location path",description:(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:(0,r.jsx)("strong",{children:e})}),"  is not a valid code location path."]})})});let p=n.allRepos.find(e=>e.repository.name===t.name&&e.repositoryLocation.name===t.location);if(!p){if(c)return(0,r.jsx)(i.x,{padding:{vertical:64},flex:{direction:"row",justifyContent:"center"},children:(0,r.jsx)(s.f,{label:"Loading ".concat((0,x.Uz)(t),"…")})});let e=n.locationEntries.find(e=>e.id===t.location);return(0,r.jsx)(i.x,{padding:{vertical:64},children:(0,r.jsx)(j,{repoAddress:t,locationEntry:e||null})})}return(0,r.jsxs)(d.rs,{children:[(0,r.jsx)(ny.A,{path:"/locations/:repoPath/graphs/(/?.*)",children:(0,r.jsx)(R,{repoAddress:t})}),(0,r.jsx)(ny.A,{path:["/locations/:repoPath/pipelines/(/?.*)","/locations/:repoPath/jobs/(/?.*)","/locations/:repoPath/pipeline_or_job/(/?.*)"],children:(0,r.jsx)(rR,{repoAddress:t})}),(0,r.jsx)(ny.A,{path:"/locations/:repoPath/schedules/:scheduleName/:runTab?",children:(0,r.jsx)(im,{repoAddress:t})}),(0,r.jsx)(ny.A,{path:"/locations/:repoPath/sensors/:sensorName",children:(0,r.jsx)(iv.A,{repoAddress:t})}),(0,r.jsx)(ny.A,{path:"/locations/:repoPath/resources/:resourceName",children:(0,r.jsx)(r$.r,{repoAddress:t})}),(0,r.jsx)(ny.A,{path:["/locations/:repoPath/asset-groups/:groupName/list(/?.*)"],children:(0,r.jsx)(nR,{repoAddress:t,tab:"list"})}),(0,r.jsx)(ny.A,{path:["/locations/:repoPath/asset-groups/:groupName/(/?.*)","/locations/:repoPath/asset-groups/:groupName"],children:(0,r.jsx)(nR,{repoAddress:t,tab:"lineage"})}),l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ny.A,{path:"/locations/:repoPath",exact:!0,children:(0,r.jsx)(tr,{repoAddress:t})}),(0,r.jsx)(ny.A,{path:"/locations/:repoPath/definitions",exact:!0,children:(0,r.jsx)(d.l_,{to:(0,O.$U)(t,"/assets")})}),(0,r.jsx)(ny.A,{path:["/locations/:repoPath/assets","/locations/:repoPath/jobs","/locations/:repoPath/resources","/locations/:repoPath/schedules","/locations/:repoPath/sensors","/locations/:repoPath/graphs","/locations/:repoPath/ops/:name?"],exact:!0,children:(0,r.jsx)(n4,{repoAddress:t,repository:p.repository})})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ny.A,{path:"/locations/:repoPath",exact:!0,children:(0,r.jsx)(d.l_,{to:(0,O.$U)(t,"/assets")})}),(0,r.jsx)(ny.A,{path:"/locations/:repoPath/resources",exact:!0,children:(0,r.jsx)(rF.g,{repoAddress:t})}),(0,r.jsx)(ny.A,{path:"/locations/:repoPath/assets",exact:!0,children:(0,r.jsx)(ed,{repoAddress:t})}),(0,r.jsx)(ny.A,{path:"/locations/:repoPath/jobs",exact:!0,children:(0,r.jsx)(eO,{repoAddress:t})}),(0,r.jsx)(ny.A,{path:"/locations/:repoPath/schedules",exact:!0,children:(0,r.jsx)(nl,{repoAddress:t})}),(0,r.jsx)(ny.A,{path:"/locations/:repoPath/sensors",exact:!0,children:(0,r.jsx)(nm,{repoAddress:t})}),(0,r.jsx)(ny.A,{path:"/locations/:repoPath/graphs",exact:!0,children:(0,r.jsx)(eS,{repoAddress:t})}),(0,r.jsx)(ny.A,{path:"/locations/:repoPath/ops/:name?",exact:!0,children:(0,r.jsx)(e4,{repoAddress:t})})]}),(0,r.jsx)(ny.A,{path:["/locations/:repoPath/*","/locations/:repoPath/"],children:(0,r.jsx)(d.l_,{to:(0,O.$U)(t,"/assets")})})]})},iS=()=>(0,r.jsx)(l.M,{children:(0,r.jsx)(d.rs,{children:(0,r.jsx)(ny.A,{path:"/locations/:repoPath",children:(0,r.jsx)(ib,{})})})});var iw=iS}}]);
//# sourceMappingURL=2088.4def8f69e6466f35.js.map