"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8346],{59672:function(e,t,n){n.r(t),n.d(t,{MergedAutomationRoot:function(){return eE},default:function(){return eN}});var s=n(52322),r=n(14934),o=n(45774),a=n(37483),l=n(74580),i=n(35292),c=n(74159),d=n(35002),u=n(2784),h=n(55010),m=n(60603),p=n(38491),x=n(56619),j=n(25212),g=n(34147),f=n(39013),y=n(92506),v=n(20958),S=n(71406),w=n(54724),b=n(94062),C=n(99417),E=n(89398);let N=e=>{let{openWithIntent:t,onClose:n,onComplete:r,automations:o}=e,a=o.length,[l,i]=(0,w.s)();(0,u.useEffect)(()=>{"not-open"===t&&i({type:"reset"})},[t,i]);let[c]=(0,v.Db)(E.VE),[d]=(0,v.Db)(E.Xu),[h]=(0,v.Db)(C.Wz),[m]=(0,v.Db)(C.d0),N=async e=>{let{repoAddress:t,name:n,type:s}=e,r={repositoryLocationName:t.location,repositoryName:t.name};switch(s){case"sensor":{let{data:e}=await c({variables:{sensorSelector:{...r,sensorName:n}}});switch(null==e?void 0:e.startSensor.__typename){case"Sensor":i({type:"update-success"});return;case"SensorNotFoundError":case"UnauthorizedError":case"PythonError":i({type:"update-error",name:n,error:e.startSensor.message})}break}case"schedule":{let{data:e}=await h({variables:{scheduleSelector:{...r,scheduleName:n}}});switch(null==e?void 0:e.startSchedule.__typename){case"ScheduleStateResult":i({type:"update-success"});return;case"UnauthorizedError":case"PythonError":i({type:"update-error",name:n,error:e.startSchedule.message})}break}default:(0,S.UT)(s)}},k=async e=>{let{name:t,type:n,instigationState:s}=e,r={id:s.id};switch(n){case"sensor":{let{data:e}=await d({variables:r});switch(null==e?void 0:e.stopSensor.__typename){case"StopSensorMutationResult":i({type:"update-success"});return;case"UnauthorizedError":case"PythonError":i({type:"update-error",name:t,error:e.stopSensor.message})}break}case"schedule":{let{data:e}=await m({variables:r});switch(null==e?void 0:e.stopRunningSchedule.__typename){case"ScheduleStateResult":i({type:"update-success"});return;case"UnauthorizedError":case"PythonError":i({type:"update-error",name:t,error:e.stopRunningSchedule.message})}break}default:(0,S.UT)(n)}},M=async()=>{if("not-open"!==t){for(let e of(i({type:"start"}),o))"start"===t?await N(e):await k(e);i({type:"complete"}),r()}},z="updating"!==l.step;return(0,s.jsxs)(y.Vq,{isOpen:"not-open"!==t,title:"start"===t?"Start automations":"Stop automations",canEscapeKeyClose:z,canOutsideClickClose:z,onClose:n,children:[(0,s.jsx)(y.a7,{children:(0,s.jsxs)(g.Z,{direction:"column",spacing:24,children:[(()=>{if("not-open"===t)return null;switch(l.step){case"initial":if("stop"===t)return(0,s.jsx)("div",{children:"".concat(1===a?"1 automation":"".concat(a," automations")," will be stopped. Do you want to continue?")});return(0,s.jsx)("div",{children:"".concat(1===a?"1 automation":"".concat(a," automations")," will be started. Do you want to continue?")});case"updating":case"completed":let e=a>0?l.completion.completed/a:1;return(0,s.jsxs)(g.Z,{direction:"column",spacing:8,children:[(0,s.jsx)(j.ko,{intent:"primary",value:Math.max(.1,e),animate:e<1}),"updating"===l.step?(0,s.jsx)(b.c,{message:"Automations are being updated, please do not navigate away yet."}):null]});default:return null}})(),(()=>{if("not-open"===t||"initial"===l.step)return null;if("updating"===l.step)return(0,s.jsx)("div",{children:"Please do not close the window or navigate away while automations are being updated."});let e=l.completion.errors,n=Object.keys(e).length,r=l.completion.completed-n;return(0,s.jsxs)(g.Z,{direction:"column",spacing:8,children:[r?(0,s.jsxs)(g.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,s.jsx)(x.JO,{name:"check_circle",color:f.fA()}),(0,s.jsx)("div",{children:"start"===t?"Successfully started ".concat(1===r?"1 automation":"".concat(r," automations"),"."):"Successfully stopped ".concat(1===r?"1 automation":"".concat(r," automations"),".")})]}):null,n?(0,s.jsxs)(g.Z,{direction:"column",spacing:8,children:[(0,s.jsxs)(g.Z,{direction:"row",spacing:8,alignItems:"flex-start",children:[(0,s.jsx)(x.JO,{name:"warning",color:f.qr()}),(0,s.jsx)("div",{children:"start"===t?"Could not start ".concat(1===n?"1 automation":"".concat(n," automations"),":"):"Could not stop ".concat(1===n?"1 automation":"".concat(n," automations"),":")})]}),(0,s.jsx)("ul",{style:{margin:"8px 0"},children:Object.keys(e).map(t=>(0,s.jsx)("li",{children:(0,s.jsxs)(g.Z,{direction:"row",spacing:8,children:[(0,s.jsxs)("strong",{children:[t,":"]}),e[t]?(0,s.jsx)("div",{children:e[t]}):null]})},t))})]}):null]})})()]})}),(0,s.jsx)(y.cN,{children:(()=>{if("not-open"===t)return null;switch(l.step){case"initial":return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(p.zx,{onClick:n,children:"Cancel"}),(0,s.jsx)(p.zx,{intent:"primary",onClick:M,children:"start"===t?"Start ".concat(1===a?"1 automation":"".concat(a," automations")):"Stop ".concat(1===a?"1 automation":"".concat(a," automations"))})]});case"updating":return(0,s.jsx)(p.zx,{intent:"primary",disabled:!0,children:"start"===t?"Starting ".concat(1===a?"1 automation":"".concat(a," automations")):"Stopping ".concat(1===a?"1 automation":"".concat(a," automations"))});case"completed":return(0,s.jsx)(p.zx,{intent:"primary",onClick:n,children:"Done"})}})()})]})};var k=n(69557);let M=e=>{let{automations:t,onDone:n}=e,r=t.length,[o,a]=(0,u.useState)("not-open"),{anyOff:l,anyOn:i}=(0,u.useMemo)(()=>(0,k.H)(t.map(e=>{let{instigationState:t}=e;return t})),[t]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.J,{content:(0,s.jsxs)(m.v2,{children:[(0,s.jsx)(m.sN,{text:"Start ".concat(1===r?"1 automation":"".concat(r," automations")),disabled:!l,"aria-disabled":!l,icon:"toggle_on",onClick:()=>{a("start")}}),(0,s.jsx)(m.sN,{text:"Stop ".concat(1===r?"1 automation":"".concat(r," automations")),disabled:!i,"aria-disabled":!i,icon:"toggle_off",onClick:()=>{a("stop")}})]}),placement:"bottom-end",children:(0,s.jsx)(p.zx,{disabled:!r,intent:"primary",rightIcon:(0,s.jsx)(x.JO,{name:"expand_more"}),children:"Actions"})}),(0,s.jsx)(N,{openWithIntent:o,automations:t,onClose:()=>a("not-open"),onComplete:()=>{n()}})]})};var z=n(43212),A=n(88510),T=n(35505),_=n(17008);let L="60px minmax(400px, 1.5fr) 240px 1fr 200px 200px",q=e=>{let{checkbox:t}=e;return(0,s.jsxs)(_.VJ,{templateColumns:L,sticky:!0,children:[(0,s.jsx)(_.qN,{children:(0,s.jsx)("div",{style:{position:"relative",top:"-1px"},children:t})}),(0,s.jsx)(_.qN,{children:"Name"}),(0,s.jsx)(_.qN,{children:"Type"}),(0,s.jsx)(_.qN,{children:"Target"}),(0,s.jsx)(_.qN,{children:"Last tick"}),(0,s.jsx)(_.qN,{children:"Last run"})]})},O=(0,T.ZP)(r.x).withConfig({componentId:"sc-40d0a0cf-0"})(["display:grid;grid-template-columns:",";height:100%;"],L);var U=n(37504),R=n(53664),I=n(47933),P=n(24427),D=n(16336),Z=n(88257),V=n(60648),W=n(92474),F=n(6750),H=n(4219),Y=n(73310),B=n(86269),J=n(58905),K=n(27028),$=n(83738),G=n(10539);let X=(0,u.forwardRef)((e,t)=>{var n;let{index:o,name:a,repoAddress:l,checked:c,onToggleChecked:h}=e,[m,p]=(0,v.td)(K.B8,{variables:{selector:{repositoryName:l.name,repositoryLocationName:l.location,scheduleName:a}},notifyOnNetworkStatusChange:!0}),[x,j]=(0,v.td)(F.d,{variables:{scheduleSelector:{repositoryName:l.name,repositoryLocationName:l.location,scheduleName:a}}});(0,$.v5)((0,u.useCallback)(()=>{m(),x()},[m,x])),(0,D.C4)(p,D.dT),(0,D.C4)(j,D.dT);let{data:g}=p,f=(0,u.useMemo)(()=>(null==g?void 0:g.scheduleOrError.__typename)!=="Schedule"?null:g.scheduleOrError,[g]),y=null==f?void 0:f.scheduleState,S=(0,u.useMemo)(()=>{if(!y)return{disabled:!0};let{hasStartPermission:e,hasStopPermission:t,status:n}=y;return n!==Z.ynu.RUNNING||t?n!==Z.ynu.STOPPED||e?{disabled:!1}:{disabled:!0,message:"You do not have permission to start this schedule"}:{disabled:!0,message:"You do not have permission to stop this schedule"}},[y]),w=null==f?void 0:f.scheduleState.ticks[0],b=(null==f?void 0:f.pipelineName)?[{pipelineName:f.pipelineName}]:null,C=(null===(n=j.data)||void 0===n?void 0:n.scheduleOrError.__typename)==="Schedule"?j.data.scheduleOrError.assetSelection:null;return(0,s.jsx)("div",{ref:t,"data-index":o,children:(0,s.jsxs)(O,{border:"bottom",children:[(0,s.jsx)(_.E5,{children:(0,s.jsx)(d.u,{canShow:S.disabled,content:S.message||"",placement:"top",children:(0,s.jsx)(U.X,{disabled:S.disabled,checked:c,onChange:e=>{if(h&&e.target instanceof HTMLInputElement){let{checked:t}=e.target;h({checked:t,shiftKey:e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift")})}}})})}),(0,s.jsx)(_.E5,{children:(0,s.jsxs)(r.x,{flex:{direction:"row",gap:8,alignItems:"flex-start"},children:[f?(0,s.jsxs)(r.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(H.M,{repoAddress:l,schedule:f},a),(0,Y.l)(f.scheduleState.status,f.scheduleState.runningCount)]}):(0,s.jsx)("div",{style:{width:30}}),(0,s.jsx)(I.rU,{to:(0,G.$U)(l,"/schedules/".concat(a)),children:(0,s.jsx)(R.g,{text:a})})]})}),(0,s.jsx)(_.E5,{children:f?(0,s.jsxs)(r.x,{flex:{direction:"column",gap:4},children:[(0,s.jsx)(W.P,{cronSchedule:f.cronSchedule,executionTimezone:f.executionTimezone}),f.scheduleState.nextTick&&f.scheduleState.status===Z.ynu.RUNNING?(0,s.jsx)(i.YS,{children:(0,s.jsxs)("div",{style:{overflow:"hidden",whiteSpace:"nowrap",maxWidth:"100%",textOverflow:"ellipsis"},children:["Next tick:\xa0",(0,s.jsx)(B.v,{timestamp:f.scheduleState.nextTick.timestamp,timezone:f.executionTimezone,timeFormat:{showSeconds:!1,showTimezone:!0}})]})}):null]}):(0,s.jsx)($.mq,{queryResult:p})}),(0,s.jsx)(_.E5,{children:(0,s.jsx)("div",{children:(0,s.jsx)(P.p,{repoAddress:l,automationType:"schedule",targets:b,assetSelection:C})})}),(0,s.jsx)(_.E5,{children:w?(0,s.jsx)("div",{children:(0,s.jsx)(J.a,{tick:w})}):(0,s.jsx)($.mq,{queryResult:p})}),(0,s.jsx)(_.E5,{children:(null==f?void 0:f.scheduleState)&&(null==f?void 0:f.scheduleState.runs[0])?(0,s.jsx)(V.Z,{run:f.scheduleState.runs[0],name:a,showButton:!1,showHover:!0,showSummary:!1}):(0,s.jsx)($.mq,{queryResult:p})})]})})});var Q=n(6265),ee=n(60918),et=n(53029);let en=(0,u.forwardRef)((e,t)=>{var n;let{index:o,name:a,repoAddress:l,checked:i,onToggleChecked:c}=e,[h,m]=(0,v.td)(et.bL,{variables:{selector:{repositoryName:l.name,repositoryLocationName:l.location,sensorName:a}}}),[p,x]=(0,v.td)(Q.Z,{variables:{sensorSelector:{repositoryName:l.name,repositoryLocationName:l.location,sensorName:a}}});(0,$.v5)((0,u.useCallback)(()=>{h(),p()},[h,p])),(0,D.C4)(m,D.dT),(0,D.C4)(x,D.dT);let{data:j}=m,g=(0,u.useMemo)(()=>(null==j?void 0:j.sensorOrError.__typename)!=="Sensor"?null:j.sensorOrError,[j]),f=null==g?void 0:g.sensorState,y=(0,u.useMemo)(()=>{if(!f)return{disabled:!0};let{hasStartPermission:e,hasStopPermission:t,status:n}=f;return n!==Z.ynu.RUNNING||t?n!==Z.ynu.STOPPED||e?{disabled:!1}:{disabled:!0,message:"You do not have permission to start this sensor"}:{disabled:!0,message:"You do not have permission to stop this sensor"}},[f]),S=null==g?void 0:g.sensorState.ticks[0],w=null==g?void 0:g.sensorType,b=w?et.W_[w]:null,C=(null===(n=x.data)||void 0===n?void 0:n.sensorOrError.__typename)==="Sensor"?x.data.sensorOrError.assetSelection:null;return(0,s.jsx)("div",{ref:t,"data-index":o,children:(0,s.jsxs)(O,{border:"bottom",children:[(0,s.jsx)(_.E5,{children:(0,s.jsx)(d.u,{canShow:y.disabled,content:y.message||"",placement:"top",children:(0,s.jsx)(U.X,{disabled:y.disabled,checked:i,onChange:e=>{if(c&&e.target instanceof HTMLInputElement){let{checked:t}=e.target;c({checked:t,shiftKey:e.nativeEvent instanceof MouseEvent&&e.nativeEvent.getModifierState("Shift")})}}})})}),(0,s.jsx)(_.E5,{children:(0,s.jsxs)(r.x,{flex:{direction:"row",gap:8,alignItems:"flex-start"},children:[g?(0,s.jsx)(ee.c,{repoAddress:l,sensor:g},a):(0,s.jsx)("div",{style:{width:30}}),(0,s.jsx)(I.rU,{to:(0,G.$U)(l,"/sensors/".concat(a)),children:(0,s.jsx)(R.g,{text:a})})]})}),(0,s.jsx)(_.E5,{children:(0,s.jsx)("div",{children:b?b.description?(0,s.jsx)(d.u,{content:(0,s.jsx)("div",{style:{maxWidth:"300px"},children:b.description}),placement:"top",children:(0,s.jsx)(z.V,{icon:b.icon,children:b.name})}):(0,s.jsx)(z.V,{icon:b.icon,children:b.name}):null})}),(0,s.jsx)(_.E5,{children:g?(0,s.jsx)("div",{children:(0,s.jsx)(P.p,{targets:g.targets||null,repoAddress:l,assetSelection:C,automationType:g.sensorType})}):(0,s.jsx)($.mq,{queryResult:x})}),(0,s.jsx)(_.E5,{children:S?(0,s.jsx)("div",{children:(0,s.jsx)(J.a,{tick:S})}):(0,s.jsx)($.mq,{queryResult:m})}),(0,s.jsx)(_.E5,{children:(null==g?void 0:g.sensorState)&&(null==g?void 0:g.sensorState.runs[0])?(0,s.jsx)(V.Z,{run:g.sensorState.runs[0],name:a,showButton:!1,showHover:!0,showSummary:!1}):(0,s.jsx)($.mq,{queryResult:m})})]})})});var es=n(22921),er=n(40389),eo=n(98956),ea=n(50646),el=n(22563);let ei=e=>{var t,n;let{repos:o,headerCheckbox:a,checkedKeys:l,onToggleCheckFactory:i}=e,c=u.useRef(null),h=u.useMemo(()=>o.map(e=>{let{repoAddress:t}=e;return(0,el.Uz)(t)}),[o]),{expandedKeys:m,onToggle:p,onToggleAll:x}=(0,ea.N)(es.y,h),j=u.useMemo(()=>{let e=[];return o.forEach(t=>{let{repoAddress:n,schedules:s,sensors:r}=t;e.push({type:"header",repoAddress:n,scheduleCount:s.length,sensorCount:r.length});let o=(0,el.Uz)(n);if(m.includes(o)){let t=new Set(r),o=new Set(s);[...r,...s].sort((e,t)=>S.Bl.compare(e,t)).forEach(s=>{t.has(s)?e.push({type:"sensor",repoAddress:n,sensor:s}):o.has(s)&&e.push({type:"schedule",repoAddress:n,schedule:s})})}}),e},[o,m]),g=(0,eo.w)(o.map(e=>{let{repoAddress:t}=e;return t.name})),f=(0,A.MG)({count:j.length,getScrollElement:()=>c.current,estimateSize:e=>{let t=j[e];return(null==t?void 0:t.type)==="header"?32:64},overscan:15}),y=f.getTotalSize(),v=f.getVirtualItems();return(0,s.jsx)("div",{style:{overflow:"hidden"},children:(0,s.jsxs)(_.W2,{ref:c,children:[(0,s.jsx)(q,{checkbox:a}),(0,s.jsx)(_.Nh,{$totalHeight:y,children:(0,s.jsx)(_.HR,{$start:null!==(n=null===(t=v[0])||void 0===t?void 0:t.start)&&void 0!==n?n:0,children:v.map(e=>{let{index:t,key:n}=e,o=j[t],a=o.type;if("header"===a)return(0,s.jsx)($._$,{repoAddress:o.repoAddress,ref:f.measureElement,index:t,onToggle:p,onToggleAll:x,expanded:m.includes((0,el.Uz)(o.repoAddress)),showLocation:g.has(o.repoAddress.name),rightElement:(0,s.jsxs)(r.x,{flex:{direction:"row",gap:4},children:[(0,s.jsx)(d.u,{content:1===o.sensorCount?"1 sensor":"".concat(o.sensorCount," sensors"),placement:"top",children:(0,s.jsx)(z.V,{icon:"sensors",children:o.sensorCount})}),(0,s.jsx)(d.u,{content:1===o.scheduleCount?"1 schedule":"".concat(o.scheduleCount," schedules"),placement:"top",children:(0,s.jsx)(z.V,{icon:"schedule",children:o.scheduleCount})})]})},n);if("sensor"===a){let e=(0,er.M)(o.repoAddress,o.sensor);return(0,s.jsx)(en,{index:t,ref:f.measureElement,name:o.sensor,checked:l.has(e),onToggleChecked:i(e),repoAddress:o.repoAddress},n)}if("schedule"===a){let e=(0,er.M)(o.repoAddress,o.schedule);return(0,s.jsx)(X,{index:t,ref:f.measureElement,name:o.schedule,checked:l.has(e),onToggleChecked:i(e),repoAddress:o.repoAddress},n)}return(0,s.jsx)("div",{},n)})})})]})})};var ec=n(69737),ed=n(20171),eu=n(4378),eh=n(52154),em=n(77044),ep=n(907),ex=n(49455),ej=n(74302),eg=n(81602),ef=n(2389),ey=n(50027),ev=n(2949),eS=n(8355),ew=n(65822);let eb={schedules:{label:"Schedules",value:{type:"schedules",label:"Schedules"},match:["schedules"]},sensors:{label:"Sensors",value:{type:"sensors",label:"Sensors"},match:["sensors"]}},eC=Object.values(eb),eE=()=>{(0,ec.Px)(),(0,ed.j)("Automation");let{allRepos:e,visibleRepos:t,loading:n,data:h,refetch:m}=(0,u.useContext)(eS.C5),[p,x]=(0,eu.q)({queryKey:"search",defaults:{search:""}}),[j,g]=(0,eu.q)({encode:e=>({automationType:e.size?Array.from(e).join(","):void 0}),decode:e=>{var t;return new Set((null===(t=e.automationType)||void 0===t?void 0:t.split(","))||[])}}),f=(0,u.useMemo)(()=>new Set(Array.from(j).map(e=>eb[e].value)),[j]),y=(0,ey.A)(),v=(0,ev.g)(),S=(0,eg.im)({name:"Automation type",allValues:eC,icon:"auto_materialize_policy",getStringValue:e=>e.label,state:f,renderLabel:e=>{let{value:t}=e;return(0,s.jsx)("span",{children:t.label})},onStateChanged:e=>{g(new Set(Array.from(e).map(e=>e.type)))}}),w=(0,u.useMemo)(()=>[y,v,S],[y,v,S]),{button:b,activeFiltersJsx:C}=(0,ej.m)({filters:w}),E=(0,u.useMemo)(()=>{let e=Object.values(h).filter(e=>"WorkspaceLocationEntry"===e.__typename),n=(0,ex.S)(t);return ek(e).filter(e=>{let{repoAddress:t}=e;return n.has((0,el.Uz)(t))})},[h,t]),{state:N}=v,k=(0,u.useMemo)(()=>E.map(e=>{let{sensors:t,schedules:n,...s}=e;return{...s,sensors:t.filter(e=>{let{sensorState:t}=e;return(!N.size||!!N.has(t.status))&&(!j.size||!!j.has("sensors"))}),schedules:n.filter(e=>{let{scheduleState:t}=e;return(!N.size||!!N.has(t.status))&&(!j.size||!!j.has("schedules"))})}}),[E,j,N]),z=p.trim().toLocaleLowerCase(),A=z.length>0,T=(0,u.useMemo)(()=>{let e=z.toLocaleLowerCase();return k.map(t=>{let{repoAddress:n,schedules:s,sensors:r}=t;return{repoAddress:n,schedules:s.filter(t=>{let{name:n}=t;return n.toLocaleLowerCase().includes(e)}).map(e=>{let{name:t}=e;return t}),sensors:r.filter(t=>{let{name:n}=t;return n.toLocaleLowerCase().includes(e)}).map(e=>{let{name:t}=e;return t})}}).filter(e=>{let{sensors:t,schedules:n}=e;return t.length>0||n.length>0})},[k,z]),_=(0,u.useMemo)(()=>k.map(e=>{let{repoAddress:t,schedules:n,sensors:s}=e;return[...s.filter(e=>{let{sensorState:t}=e;return(0,em.i)(t)}).map(e=>{let{name:n,sensorState:s}=e;return{repoAddress:t,name:n,type:"sensor",instigationState:s}}),...n.filter(e=>{let{scheduleState:t}=e;return(0,em.i)(t)}).map(e=>{let{name:n,scheduleState:s}=e;return{repoAddress:t,name:n,type:"schedule",instigationState:s}})]}).flat(),[k]),L=(0,u.useMemo)(()=>_.map(e=>{let{repoAddress:t,name:n}=e;return(0,er.M)(t,n)}),[_]),[{checkedIds:q},{onToggleFactory:O,onToggleAll:U}]=(0,eh.a)(L),R=(0,u.useMemo)(()=>{let e=new Set(T.map(e=>{let{repoAddress:t,schedules:n,sensors:s}=e;return[...n,...s].map(e=>(0,er.M)(t,e))}).flat());return L.filter(t=>e.has(t))},[L,T]),I=(0,u.useMemo)(()=>{let e=new Set(R.filter(e=>q.has(e)));return _.filter(t=>{let{repoAddress:n,name:s}=t;return e.has((0,er.M)(n,s))})},[R,_,q]),P=L.length>0,D=I.length,Z=R.length>0;return(0,s.jsxs)(r.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,s.jsx)(l.m,{title:(0,s.jsx)(i.X6,{children:"Automation"})}),(0,s.jsxs)(r.x,{padding:{horizontal:24,vertical:12},flex:{direction:"row",alignItems:"center",justifyContent:"space-between",gap:12,grow:0},children:[(0,s.jsxs)(r.x,{flex:{direction:"row",gap:12},children:[b,(0,s.jsx)(c.oi,{icon:"search",value:p,onChange:e=>x(e.target.value),placeholder:"Filter by name…",style:{width:"340px"}})]}),(0,s.jsx)(d.u,{content:"You do not have permission to start or stop these schedules",canShow:Z&&!P,placement:"top-end",useDisabledButtonTooltipFix:!0,children:(0,s.jsx)(M,{automations:I,onDone:()=>m()})})]}),C.length?(0,s.jsx)(r.x,{padding:{vertical:8,horizontal:24},border:"top-and-bottom",flex:{direction:"row",gap:8},children:C}):null,(()=>{if(n)return(0,s.jsx)(r.x,{flex:{direction:"row",justifyContent:"center"},padding:{top:64},children:(0,s.jsx)(o.f,{label:"Loading automations…"})});let l=e.length>t.length;return T.length?(0,s.jsx)(ei,{headerCheckbox:P?(0,s.jsx)(ef.W,{checkedCount:D,totalCount:R.length,onToggleAll:U}):void 0,repos:T,checkedKeys:q,onToggleCheckFactory:O}):A?(0,s.jsx)(r.x,{padding:{top:20},children:(0,s.jsx)(a.t,{icon:"search",title:"No matching automations",description:l?(0,s.jsxs)("div",{children:["No automations matching ",(0,s.jsx)("strong",{children:p})," were found in the selected code locations"]}):(0,s.jsxs)("div",{children:["No automations matching ",(0,s.jsx)("strong",{children:p})," were found in your definitions"]})})}):(0,s.jsx)(r.x,{padding:{top:20},children:(0,s.jsx)(a.t,{icon:"search",title:"No automations",description:l?"No automations were found in the selected code locations":"No matching automations"})})})()]})};var eN=eE;let ek=e=>{let t=e.map(e=>e.locationOrLoadError),n=[];for(let e of t)if((null==e?void 0:e.__typename)==="RepositoryLocation")for(let t of e.repositories){let{name:s,schedules:r,sensors:o}=t,a=(0,ew.kQ)(s,e.name);o.length>0&&n.push({repoAddress:a,schedules:r,sensors:o})}return(0,ep.S)(n)}},22921:function(e,t,n){n.d(t,{y:function(){return s}});let s="overview-collapsed-state"},907:function(e,t,n){n.d(t,{S:function(){return r}});var s=n(22563);let r=e=>[...e].sort((e,t)=>{let n=(0,s.Uz)(e.repoAddress),r=(0,s.Uz)(t.repoAddress);return n.localeCompare(r)})},49455:function(e,t,n){n.d(t,{S:function(){return o}});var s=n(65822),r=n(22563);let o=e=>new Set(e.map(e=>(0,r.Uz)((0,s.kQ)(e.repository.name,e.repositoryLocation.name))))},98956:function(e,t,n){n.d(t,{w:function(){return s}});let s=e=>{let t=new Set,n=new Set;return e.forEach(e=>{t.has(e)?n.add(e):t.add(e)}),n}},50646:function(e,t,n){n.d(t,{N:function(){return c}});var s=n(2784),r=n(4128),o=n(30001),a=n(22563);let l=e=>Array.isArray(e)?e:[],i=(e,t)=>"".concat(e,":dagster.").concat(t),c=(e,t)=>{let{basePath:n}=(0,s.useContext)(r.I),c=i(n,e),[d,u]=(0,o.U)(c,l),h=(0,s.useCallback)(e=>{let t="object"==typeof e?(0,a.Uz)(e):e;u(e=>{let n=new Set(e||[]);return n.has(t)?n.delete(t):n.add(t),Array.from(n)})},[u]),m=(0,s.useCallback)(e=>{u(n=>{let s=new Set(n||[]);return t.forEach(t=>{e?s.delete(t):s.add(t)}),Array.from(s)})},[t,u]),p=(0,s.useMemo)(()=>{let e=new Set(d);return t.filter(t=>!e.has(t))},[t,d]);return(0,s.useMemo)(()=>({expandedKeys:p,onToggle:h,onToggleAll:m}),[p,h,m])}}}]);
//# sourceMappingURL=8346.6eb12c854a8dd30e.js.map