"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9493],{19493:function(e,t,n){n.r(t),n.d(t,{CodeLocationsPage:function(){return H},CodeLocationsPageContent:function(){return A},default:function(){return B}});var i=n(52322),o=n(14934),r=n(74159),l=n(35292),s=n(74580),a=n(2784),d=n(9108),c=n(77265),x=n(53476);let u=(e,t)=>{let n=[],i=t.reduce((e,t)=>(e[t.name]=t,e),{});for(let t of e){var o,r;let e;let l=i[t.name];e="LOADING"===t.loadStatus?"Updating":(null==l?void 0:l.versionKey)!==t.versionKey?"Loading":(null==l?void 0:null===(o=l.locationOrLoadError)||void 0===o?void 0:o.__typename)==="PythonError"?"Failed":"Loaded",(null==l?void 0:null===(r=l.locationOrLoadError)||void 0===r?void 0:r.__typename)==="RepositoryLocation"?l.locationOrLoadError.repositories.forEach(i=>{n.push({type:"repository",locationStatus:t,locationEntry:l,repository:i,status:e})}):n.push({type:"location",locationStatus:t,locationEntry:l||null,status:e})}return n},h=(e,t,n)=>{let i=t.toLocaleLowerCase();return e.filter(e=>{var t;return(null===(t=n.status)||void 0===t||!t.length||!!n.status.includes(e.status))&&("repository"!==e.type?e.locationStatus.name.toLocaleLowerCase().includes(i):e.locationStatus.name.toLocaleLowerCase().includes(i)||e.repository.name.toLocaleLowerCase().includes(i))})},j=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=u(e,t),r=h(o,n,i);return{flattened:o,filtered:r}};var p=n(4378),m=n(90483),g=n(5343),y=n(74302),f=n(81602),v=n(8355);let w=()=>{let{loading:e,locationEntries:t}=(0,a.useContext)(v.C5),n=(0,x.sJ)(g.n),[o,r]=(0,a.useState)(""),l=(0,a.useCallback)(e=>{r(e.target.value)},[]),s=o.toLocaleLowerCase(),[d,c]=(0,p.q)({encode:e=>{let{status:t}=e;return{status:(null==t?void 0:t.length)?JSON.stringify(t):void 0}},decode:e=>({status:e.status?JSON.parse(e.status):[]})}),{flattened:u,filtered:h}=(0,a.useMemo)(()=>{var e;return j((null==n?void 0:null===(e=n.locationStatusesOrError)||void 0===e?void 0:e.__typename)==="WorkspaceLocationStatusEntries"?n.locationStatusesOrError.entries:[],t,s,d)},[t,s,d,n]),w=(0,f.im)({name:"Status",icon:"tag",allValues:(0,a.useMemo)(()=>["Failed","Loaded","Updating","Loading"].map(e=>({key:e,value:e,match:[e]})),[]),menuWidth:"300px",renderLabel:e=>{let{value:t}=e;return(0,i.jsx)(m.rd,{text:t})},getStringValue:e=>e,state:d.status,onStateChanged:e=>{c({status:Array.from(e)})},matchType:"all-of",canSelectAll:!1,allowMultipleSelections:!0}),{button:C,activeFiltersJsx:L}=(0,y.m)({filters:[w]});return{button:C,activeFiltersJsx:L,onChangeSearch:l,loading:e,flattened:u,filtered:h,searchValue:o}};var C=n(69737),L=n(20171),E=n(72447),S=n(79106),b=n(37483),N=n(88510),O=n(53664),k=n(38491),_=n(47933),V=n(35505),z=n(14277),I=n(12576),F=n(65822),M=n(22563),D=n(10539),q=n(35599),P=n(17008);let R="3fr 1fr 1fr 160px",T=a.forwardRef((e,t)=>{let{locationEntry:n,locationStatus:o,index:r}=e,{name:l}=o;return(0,i.jsx)("div",{ref:t,"data-index":r,children:(0,i.jsxs)(W,{border:"bottom",children:[(0,i.jsx)(P.E5,{children:(0,i.jsx)(O.g,{text:l})}),(0,i.jsx)(P.E5,{children:(0,i.jsx)("div",{children:(0,i.jsx)(I._y,{locationStatus:o,locationOrError:n})})}),(0,i.jsx)(P.E5,{children:(0,i.jsx)("div",{style:{whiteSpace:"nowrap"},children:(0,i.jsx)(q.C,{unixTimestamp:o.updateTimestamp})})}),(0,i.jsx)(P.E5,{children:(0,i.jsxs)(k.zH,{children:[(0,i.jsx)(I.hN,{location:l}),n?(0,i.jsx)(z.c5,{locationNode:n}):null]})})]})})}),J=a.forwardRef((e,t)=>{let{locationEntry:n,locationStatus:r,repository:l,index:s}=e,a=(0,F.kQ)(l.name,l.location.name),d=[...n.displayMetadata,...l.displayMetadata];return(0,i.jsx)("div",{ref:t,"data-index":s,children:(0,i.jsxs)(W,{border:"bottom",children:[(0,i.jsx)(P.E5,{children:(0,i.jsxs)(o.x,{flex:{direction:"column",gap:4},children:[(0,i.jsx)("div",{style:{fontWeight:500},children:(0,i.jsx)(_.rU,{to:(0,D.$U)(a),children:(0,i.jsx)(O.g,{text:(0,M.Uz)(a)})})}),(0,i.jsx)(I.OM,{metadata:d}),(0,i.jsx)(I.F8,{metadata:d})]})}),(0,i.jsx)(P.E5,{children:(0,i.jsx)("div",{children:(0,i.jsx)(I._y,{locationStatus:r,locationOrError:n})})}),(0,i.jsx)(P.E5,{children:(0,i.jsx)("div",{style:{whiteSpace:"nowrap"},children:(0,i.jsx)(q.C,{unixTimestamp:r.updateTimestamp})})}),(0,i.jsx)(P.E5,{style:{alignItems:"flex-end"},children:(0,i.jsxs)(k.zH,{children:[(0,i.jsx)(I.hN,{location:r.name}),(0,i.jsx)(z.c5,{locationNode:n})]})})]})})}),U=()=>(0,i.jsxs)(P.VJ,{templateColumns:R,sticky:!0,children:[(0,i.jsx)(P.qN,{children:"Name"}),(0,i.jsx)(P.qN,{children:"Status"}),(0,i.jsx)(P.qN,{children:"Updated"}),(0,i.jsx)(P.qN,{style:{textAlign:"right"},children:"Actions"})]}),W=(0,V.ZP)(o.x).withConfig({componentId:"sc-853a9e94-0"})(["display:grid;grid-template-columns:",";"],R),$=e=>{var t,n;let{loading:r,codeLocations:l,searchValue:s,isFilteredView:d}=e,c=(0,a.useRef)(null),x=(0,N.MG)({count:l.length,getScrollElement:()=>c.current,estimateSize:()=>64,overscan:10}),u=x.getTotalSize(),h=x.getVirtualItems();return r&&!l.length?(0,i.jsxs)(o.x,{flex:{gap:8,alignItems:"center"},padding:{horizontal:24},children:[(0,i.jsx)(S.$,{purpose:"body-text"}),(0,i.jsx)("div",{children:"Loading…"})]}):l.length?(0,i.jsxs)(P.W2,{ref:c,children:[(0,i.jsx)(U,{}),(0,i.jsx)(P.Nh,{$totalHeight:u,children:(0,i.jsx)(P.HR,{$start:null!==(n=null===(t=h[0])||void 0===t?void 0:t.start)&&void 0!==n?n:0,children:h.map(e=>{let{index:t,key:n}=e,o=l[t];return"location"===o.type?(0,i.jsx)(T,{index:t,locationEntry:o.locationEntry,locationStatus:o.locationStatus,ref:x.measureElement},n):(0,i.jsx)(J,{index:t,locationStatus:o.locationStatus,locationEntry:o.locationEntry,repository:o.repository,ref:x.measureElement},n)})})})]}):s?(0,i.jsx)(o.x,{padding:{vertical:32},children:(0,i.jsx)(b.t,{icon:"folder",title:"No matching code locations",description:(0,i.jsxs)("div",{children:["No code locations were found for search query ",(0,i.jsx)("strong",{children:s}),"."]})})}):d?(0,i.jsx)(o.x,{padding:{vertical:32},children:(0,i.jsx)(b.t,{icon:"folder",title:"No matching code locations",description:(0,i.jsx)("div",{children:"No code locations were found for these filter settings."})})}):(0,i.jsx)(o.x,{padding:{vertical:32},children:(0,i.jsx)(b.t,{icon:"folder",title:"No code locations",description:"When you add a code location, your definitions will appear here."})})},A=()=>{(0,C.Px)(),(0,L.j)("Code locations");let{activeFiltersJsx:e,flattened:t,button:n,loading:s,filtered:a,onChangeSearch:d,searchValue:c}=w(),x=t.length,u=x>10;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(o.x,{padding:{vertical:16,horizontal:24},flex:{direction:"row",justifyContent:"space-between",alignItems:"center"},style:{height:"64px"},children:[(0,i.jsxs)(o.x,{flex:{direction:"row",gap:8,alignItems:"center"},children:[n,u?(0,i.jsx)(r.oi,{icon:"search",value:c,onChange:d,placeholder:"Filter code locations by name…",style:{width:"400px"}}):(0,i.jsx)(l.pm,{id:"repository-locations",children:s||!x?"Code locations":1===x?"1 code location":"".concat(x," code locations")})]}),(0,i.jsxs)(o.x,{flex:{direction:"row",gap:12,alignItems:"center"},children:[u?(0,i.jsx)("div",{children:"".concat(x," code locations")}):null,(0,i.jsx)(E.i,{})]})]}),e.length?(0,i.jsx)(o.x,{flex:{direction:"row",alignItems:"center",gap:4},padding:{horizontal:24},children:e}):null,(0,i.jsx)($,{loading:s,codeLocations:a,isFilteredView:!!e.length,searchValue:c})]})},H=()=>{let{pageTitle:e}=a.useContext(d.N);return(0,i.jsxs)(o.x,{flex:{direction:"column"},style:{height:"100%",overflow:"hidden"},children:[(0,i.jsx)(s.m,{title:(0,i.jsx)(l.X6,{children:e}),tabs:(0,i.jsx)(c.Z,{tab:"locations"})}),(0,i.jsx)(A,{})]})};var B=H},14277:function(e,t,n){n.d(t,{c5:function(){return h}});var i=n(52322),o=n(60603),r=n(55010),l=n(38491),s=n(56619),a=n(92506),d=n(1747),c=n(20156),x=n(2784),u=n(45984);let h=e=>{var t;let{locationNode:n}=e,[a,d]=(0,x.useState)(!1),[c,u]=(0,x.useState)(!1),h=null,m=null;return(null===(t=n.locationOrLoadError)||void 0===t?void 0:t.__typename)==="RepositoryLocation"&&null!==n.locationOrLoadError.dagsterLibraryVersions&&(h=(0,i.jsx)(o.sN,{icon:"info",text:"View Dagster libraries",onClick:()=>u(!0)}),m=(0,i.jsx)(p,{libraries:n.locationOrLoadError.dagsterLibraryVersions,isOpen:c,setIsOpen:u})),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.J,{position:"bottom-left",content:(0,i.jsxs)(o.v2,{children:[(0,i.jsx)(o.sN,{icon:"info",text:"View configuration",onClick:()=>d(!0)}),h]}),children:(0,i.jsx)(l.zx,{icon:(0,i.jsx)(s.JO,{name:"expand_more"})})}),(0,i.jsx)(j,{metadata:n.displayMetadata,isOpen:a,setIsOpen:d}),m]})},j=e=>{let{isOpen:t,setIsOpen:n,metadata:o}=e;return(0,i.jsxs)(a.Vq,{title:"Code location configuration",icon:"info",isOpen:t,onClose:()=>n(!1),style:{width:"600px"},children:[(0,i.jsx)(m,{displayMetadata:o}),(0,i.jsx)(a.cN,{topBorder:!0,children:(0,i.jsx)(l.zx,{onClick:()=>n(!1),intent:"primary",children:"Done"})})]})},p=e=>{let{isOpen:t,setIsOpen:n,libraries:o}=e;return(0,i.jsxs)(a.Vq,{title:"Dagster library versions",icon:"info",isOpen:t,onClose:()=>n(!1),style:{width:"600px"},children:[(0,i.jsxs)(d.i,{children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{children:"Library"}),(0,i.jsx)("th",{children:"Version"})]})}),(0,i.jsx)("tbody",{children:o.map(e=>(0,i.jsxs)("tr",{children:[(0,i.jsx)("td",{children:e.name}),(0,i.jsx)("td",{children:e.version})]},e.name))})]}),(0,i.jsx)(a.cN,{topBorder:!0,children:(0,i.jsx)(l.zx,{onClick:()=>n(!1),intent:"primary",children:"Done"})})]})},m=e=>{let{displayMetadata:t}=e,n=(0,x.useMemo)(()=>{let e=t.reduce((e,t)=>(e[t.key]=t.value,e),{});return u.Pz(e)},[t]);return(0,i.jsx)(c.u,{value:n,options:{readOnly:!0,lineNumbers:!0,mode:"yaml"},theme:["config-editor"]})}},12576:function(e,t,n){n.d(t,{F8:function(){return L},OM:function(){return w},_y:function(){return E},hN:function(){return S}});var i=n(52322),o=n(35002),r=n(83373),l=n(53664),s=n(14934),a=n(39013),d=n(43212),c=n(89891),x=n(38491),u=n(56619),h=n(74188),j=n(2784),p=n(35505),m=n(81306),g=n(50309),y=n(85227),f=n(22203),v=n(68954);let w=e=>{let{metadata:t}=e,n=(0,y.m)(),s=t.find(e=>{let{key:t}=e;return"image"===t}),a=(null==s?void 0:s.value)||"",d=(0,j.useCallback)(async()=>{n(a),await (0,g.B7)({intent:"success",icon:"done",message:"Image string copied!"})},[n,a]);return s?(0,i.jsxs)(C,{flex:{direction:"row",gap:4},children:[(0,i.jsx)("span",{style:{fontWeight:500},children:"image:"}),(0,i.jsx)(o.u,{content:"Click to copy",placement:"top",display:"block",children:(0,i.jsx)(r.k,{onClick:d,style:b,children:(0,i.jsx)(l.g,{text:s.value})})})]}):null},C=(0,p.ZP)(s.x).withConfig({componentId:"sc-b526e331-0"})(["width:100%;color:",";font-size:12px;.bp4-popover2-target{overflow:hidden;}"],a.$()),L=e=>{let{metadata:t}=e,n=t.find(e=>{let{key:t}=e;return"module_name"===t||"package_name"===t||"python_file"===t});return n?(0,i.jsxs)(s.x,{flex:{direction:"row",gap:4},style:{width:"100%",color:a.$(),fontSize:12},children:[(0,i.jsxs)("span",{style:{fontWeight:500},children:[n.key,":"]}),(0,i.jsx)("div",{style:b,children:(0,i.jsx)(l.g,{text:n.value})})]}):null},E=e=>{var t;let{locationStatus:n,locationOrError:o}=e,[r,l]=(0,j.useState)(!1),a=(0,j.useMemo)(()=>(0,v.je)(n.name),[n.name]),{reloading:x,tryReload:u}=(0,v.Dc)({scope:"location",reloadFn:a});return"LOADING"===n.loadStatus?(0,i.jsx)(d.V,{minimal:!0,intent:"primary",children:"Updating…"}):(null==o?void 0:o.versionKey)!==n.versionKey?(0,i.jsx)(d.V,{minimal:!0,intent:"primary",children:"Loading…"}):(null==o?void 0:null===(t=o.locationOrLoadError)||void 0===t?void 0:t.__typename)==="PythonError"?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(s.x,{flex:{alignItems:"center",gap:12},children:[(0,i.jsx)(d.V,{minimal:!0,intent:"danger",children:"Failed"}),(0,i.jsx)(c.Z,{onClick:()=>l(!0),children:(0,i.jsx)("span",{style:{fontSize:"12px"},children:"View error"})})]}),(0,i.jsx)(m.p,{location:n.name,isOpen:r,error:o.locationOrLoadError,reloading:x,onDismiss:()=>l(!1),onTryReload:()=>u()})]}):(0,i.jsx)(d.V,{minimal:!0,intent:"success",children:"Loaded"})},S=e=>{let{location:t}=e;return(0,i.jsx)(f.s,{location:t,ChildComponent:e=>{let{reloading:t,tryReload:n,hasReloadPermission:r}=e;return(0,i.jsx)(s.x,{flex:{direction:"row",alignItems:"center",gap:4},children:(0,i.jsx)(o.u,{content:r?"":f.H,canShow:!r,useDisabledButtonTooltipFix:!0,children:(0,i.jsx)(x.zx,{icon:(0,i.jsx)(u.JO,{name:"code_location_reload"}),disabled:!r,loading:t,onClick:()=>n(),children:"Reload"})})})}})},b={width:"100%",display:"block",fontFamily:h.b.monospace,fontSize:"12px",color:a.$()}}}]);
//# sourceMappingURL=9493.44a1d016dbcc657f.js.map